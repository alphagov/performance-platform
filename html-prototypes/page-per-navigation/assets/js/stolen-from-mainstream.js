function dean_addEvent(t,e,i){if(t.addEventListener)t.addEventListener(e,i,!1);else{i.$$guid||(i.$$guid=dean_addEvent.guid++),t.events||(t.events={});var n=t.events[e];n||(n=t.events[e]={},t["on"+e]&&(n[0]=t["on"+e])),n[i.$$guid]=i,t["on"+e]=handleEvent}}function removeEvent(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.events&&t.events[e]&&delete t.events[e][i.$$guid]}function handleEvent(t){var e=!0;t=t||fixEvent(((this.ownerDocument||this.document||this).parentWindow||window).event);var i=this.events[t.type];for(var n in i)this.$$handleEvent=i[n],this.$$handleEvent(t)===!1&&(e=!1);return e}function fixEvent(t){return t.preventDefault=fixEvent.preventDefault,t.stopPropagation=fixEvent.stopPropagation,t}function govspeakBarcharts(){$(".js-barchart-table").each(function(){$.magnaCharta($(this),{toggleText:"Change between chart and table"})})}!function(t,e){var i;t.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not(button[type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var i=t('meta[name="csrf-token"]').attr("content");i&&e.setRequestHeader("X-CSRF-Token",i)},fire:function(e,i,n){var a=t.Event(i);return e.trigger(a,n),a.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},handleRemote:function(n){var a,s,o,r,l=n.data("cross-domain")||null,u=n.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType;if(i.fire(n,"ajax:before")){if(n.is("form")){a=n.attr("method"),s=n.attr("action"),o=n.serializeArray();var d=n.data("ujs:submit-button");d&&(o.push(d),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(a=n.data("method"),s=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):(a=n.data("method"),s=n.attr("href"),o=n.data("params")||null);return r={type:a||"GET",data:o,dataType:u,crossDomain:l,beforeSend:function(t,a){return a.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+a.accepts.script),i.fire(n,"ajax:beforeSend",[t,a])},success:function(t,e,i){n.trigger("ajax:success",[t,e,i])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,i){n.trigger("ajax:error",[t,e,i])}},s&&(r.url=s),i.ajax(r)}return!1},handleMethod:function(i){var n=i.attr("href"),a=i.data("method"),s=i.attr("target"),o=t("meta[name=csrf-token]").attr("content"),r=t("meta[name=csrf-param]").attr("content"),l=t('<form method="post" action="'+n+'"></form>'),u='<input name="_method" value="'+a+'" type="hidden" />';r!==e&&o!==e&&(u+='<input name="'+r+'" value="'+o+'" type="hidden" />'),s&&l.attr("target",s),l.hide().append(u).appendTo("body"),l.submit()},disableFormElements:function(e){e.find(i.disableSelector).each(function(){var e=t(this),i=e.is("button")?"html":"val";e.data("ujs:enable-with",e[i]()),e[i](e.data("disable-with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(i.enableSelector).each(function(){var e=t(this),i=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[i](e.data("ujs:enable-with")),e.prop("disabled",!1)})},allowAction:function(t){var e,n=t.data("confirm"),a=!1;return n?(i.fire(t,"confirm")&&(a=i.confirm(n),e=i.fire(t,"confirm:complete",[a])),a&&e):!0},blankInputs:function(e,i,n){var a,s=t(),o=i||"input,textarea";return e.find(o).each(function(){a=t(this),(n?a.val():!a.val())&&(s=s.add(a))}),s.length?s:!1},nonBlankInputs:function(t,e){return i.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},callFormSubmitBindings:function(i,n){var a=i.data("events"),s=!0;return a!==e&&a.submit!==e&&t.each(a.submit,function(t,e){return"function"==typeof e.handler?s=e.handler(n):void 0}),s},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return i.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.data("ujs:enable-with",!1)),t.unbind("click.railsDisable")}},t.ajaxPrefilter(function(t,e,n){t.crossDomain||i.CSRFProtection(n)}),t(document).delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(t(this))}),t(document).delegate(i.linkClickSelector,"click.rails",function(n){var a=t(this),s=a.data("method"),o=a.data("params");return i.allowAction(a)?(a.is(i.linkDisableSelector)&&i.disableElement(a),a.data("remote")!==e?!n.metaKey&&!n.ctrlKey||s&&"GET"!==s||o?(i.handleRemote(a)===!1&&i.enableElement(a),!1):!0:a.data("method")?(i.handleMethod(a),!1):void 0):i.stopEverything(n)}),t(document).delegate(i.inputChangeSelector,"change.rails",function(e){var n=t(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),t(document).delegate(i.formSubmitSelector,"submit.rails",function(n){var a=t(this),s=a.data("remote")!==e,o=i.blankInputs(a,i.requiredInputSelector),r=i.nonBlankInputs(a,i.fileInputSelector);return i.allowAction(a)?o&&a.attr("novalidate")==e&&i.fire(a,"ajax:aborted:required",[o])?i.stopEverything(n):s?r?i.fire(a,"ajax:aborted:file",[r]):!t.support.submitBubbles&&t().jquery<"1.7"&&i.callFormSubmitBindings(a,n)===!1?i.stopEverything(n):(i.handleRemote(a),!1):(setTimeout(function(){i.disableFormElements(a)},13),void 0):i.stopEverything(n)}),t(document).delegate(i.formInputClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);var a=n.attr("name"),s=a?{name:a,value:n.val()}:null;n.closest("form").data("ujs:submit-button",s)}),t(document).delegate(i.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&i.disableFormElements(t(this))}),t(document).delegate(i.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&i.enableFormElements(t(this))})}(jQuery),/*! jQuery UI - v1.10.2 - 2013-03-19
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.slider.js
* Copyright 2013 jQuery Foundation and other contributors Licensed MIT */
function(t,e){function i(e,i){var a,s,o,r=e.nodeName.toLowerCase();return"area"===r?(a=e.parentNode,s=a.name,e.href&&s&&"map"===a.nodeName.toLowerCase()?(o=t("img[usemap=#"+s+"]")[0],!!o&&n(o)):!1):(/input|select|textarea|button|object/.test(r)?!e.disabled:"a"===r?e.href||i:i)&&n(e)}function n(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var a=0,s=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(i,n){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),n&&n.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var n,a,s=t(this[0]);s.length&&s[0]!==document;){if(n=s.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(a=parseInt(s.css("zIndex"),10),!isNaN(a)&&0!==a))return a;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var n=t.attr(e,"tabindex"),a=isNaN(n);return(a||n>=0)&&i(e,!a)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,n){function a(e,i,n,a){return t.each(s,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),a&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var s="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(i){return i===e?r["inner"+n].call(this):this.each(function(){t(this).css(o,a(this,i)+"px")})},t.fn["outer"+n]=function(e,i){return"number"!=typeof e?r["outer"+n].call(this,e):this.each(function(){t(this).css(o,a(this,e,!0,i)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,n){var a,s=t.ui[e].prototype;for(a in n)s.plugins[a]=s.plugins[a]||[],s.plugins[a].push([i,n[a]])},call:function(t,e,i){var n,a=t.plugins[e];if(a&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(n=0;n<a.length;n++)t.options[a[n][0]]&&a[n][1].apply(t.element,i)}},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return e[n]>0?!0:(e[n]=1,a=e[n]>0,e[n]=0,a)}})}(jQuery),function(t,e){var i=0,n=Array.prototype.slice,a=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(s){}a(e)},t.widget=function(e,i,n){var a,s,o,r,l={},u=e.split(".")[0];e=e.split(".")[1],a=u+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][a.toLowerCase()]=function(e){return!!t.data(e,a)},t[u]=t[u]||{},s=t[u][e],o=t[u][e]=function(t,e){return this._createWidget?(arguments.length&&this._createWidget(t,e),void 0):new o(t,e)},t.extend(o,s,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),r=new i,r.options=t.widget.extend({},r.options),t.each(n,function(e,n){return t.isFunction(n)?(l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},a=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,s=this._superApply;return this._super=t,this._superApply=a,e=n.apply(this,arguments),this._super=i,this._superApply=s,e}}(),void 0):(l[e]=n,void 0)}),o.prototype=t.widget.extend(r,{widgetEventPrefix:s?r.widgetEventPrefix:e},l,{constructor:o,namespace:u,widgetName:e,widgetFullName:a}),s?(t.each(s._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,o,i._proto)}),delete s._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o)},t.widget.extend=function(i){for(var a,s,o=n.call(arguments,1),r=0,l=o.length;l>r;r++)for(a in o[r])s=o[r][a],o[r].hasOwnProperty(a)&&s!==e&&(i[a]=t.isPlainObject(s)?t.isPlainObject(i[a])?t.widget.extend({},i[a],s):t.widget.extend({},s):s);return i},t.widget.bridge=function(i,a){var s=a.prototype.widgetFullName||i;t.fn[i]=function(o){var r="string"==typeof o,l=n.call(arguments,1),u=this;return o=!r&&l.length?t.widget.extend.apply(null,[o].concat(l)):o,r?this.each(function(){var n,a=t.data(this,s);return a?t.isFunction(a[o])&&"_"!==o.charAt(0)?(n=a[o].apply(a,l),n!==a&&n!==e?(u=n&&n.jquery?u.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+o+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+o+"'")}):this.each(function(){var e=t.data(this,s);e?e.option(o||{})._init():t.data(this,s,new a(o,this))}),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,n){var a,s,o,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},a=i.split("."),i=a.shift(),a.length){for(s=r[i]=t.widget.extend({},this.options[i]),o=0;o<a.length-1;o++)s[a[o]]=s[a[o]]||{},s=s[a[o]];if(i=a.pop(),n===e)return s[i]===e?null:s[i];s[i]=n}else{if(n===e)return this.options[i]===e?null:this.options[i];r[i]=n}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,i,n){var a,s=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=a=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,a=this.widget()),t.each(n,function(n,o){function r(){return e||s.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof o?s[o]:o).apply(s,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),u=l[1]+s.eventNamespace,d=l[2];d?a.delegate(d,u,r):i.bind(u,r)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var a,s,o=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(a in s)a in i||(i[a]=s[a]);return this.element.trigger(i,n),!(t.isFunction(o)&&o.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,a,s){"string"==typeof a&&(a={effect:a});var o,r=a?a===!0||"number"==typeof a?i:a.effect||i:e;a=a||{},"number"==typeof a&&(a={duration:a}),o=!t.isEmptyObject(a),a.complete=s,a.delay&&n.delay(a.delay),o&&t.effects&&t.effects.effect[r]?n[e](a):r!==e&&n[r]?n[r](a.duration,a.easing,s):n.queue(function(i){t(this)[e](),s&&s.call(n[0]),i()})}})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,a=1===i.which,s="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return a&&!s&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,n=this.options,a=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];for(i=n.values&&n.values.length||1,a.length>i&&(a.slice(i).remove(),a=a.slice(0,i)),e=a.length;i>e;e++)o.push(s);this.handles=a.add(t(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):this.range=t([])},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,n,a,s,o,r,l,u,d=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),a=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(n-d.values(e));(a>i||a===i&&(e===d._lastChangedValue||d.values(e)===c.min))&&(a=i,s=t(this),o=e)}),r=this._start(e,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),l=s.offset(),u=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:e.pageX-l.left-s.width()/2,top:e.pageY-l.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,o,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,a,s;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/e,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),a=this._valueMax()-this._valueMin(),s=this._valueMin()+n*a,this._trimAlignValue(s)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var n,a,s;this.options.values&&this.options.values.length?(n=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>n||1===e&&n>i)&&(i=n),i!==this.values(e)&&(a=this.values(),a[e]=i,s=this._trigger("slide",t,{handle:this.handles[e],value:i,values:a}),n=this.values(e?0:1),s!==!1&&this.values(e,i,!0))):i!==this.value()&&(s=this._trigger("slide",t,{handle:this.handles[e],value:i}),s!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(e,i){var n,a,s;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e),void 0;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(n=this.options.values,a=arguments[0],s=0;s<n.length;s+=1)n[s]=this._trimAlignValue(a[s]),this._change(null,s);this._refreshValue()},_setOption:function(e,i){var n,a=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(a=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;a>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,n,a,s,o=this.options.range,r=this.options,l=this,u=this._animateOff?!1:r.animate,d={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=100*((l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())),d["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[u?"animate":"css"](d,r.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[u?"animate":"css"]({left:i+"%"},r.animate),1===n&&l.range[u?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===n&&l.range.stop(1,1)[u?"animate":"css"]({bottom:i+"%"},r.animate),1===n&&l.range[u?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(n=this.value(),a=this._valueMin(),s=this._valueMax(),i=s!==a?100*((n-a)/(s-a)):0,d["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[u?"animate":"css"](d,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[u?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[u?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(i){var n,a,s,o,r=t(i.target).data("ui-slider-handle-index");switch(i.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(i.target).addClass("ui-state-active"),n=this._start(i,r),n===!1))return}switch(o=this.options.step,a=s=this.options.values&&this.options.values.length?this.values(r):this.value(),i.keyCode){case t.ui.keyCode.HOME:s=this._valueMin();break;case t.ui.keyCode.END:s=this._valueMax();break;case t.ui.keyCode.PAGE_UP:s=this._trimAlignValue(a+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(a-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(a===this._valueMax())return;s=this._trimAlignValue(a+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(a===this._valueMin())return;s=this._trimAlignValue(a-o)}this._slide(i,r,s)},click:function(t){t.preventDefault()},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}})}(jQuery);/**
*    The Nomensa accessible media player is a flexible multimedia solution for websites and intranets.  
*    The core player consists of JavaScript wrapper responsible for generating an accessible HTML toolbar 
*    for interacting with a media player of your choice. We currently provide support for YouTube (default),
*    Vimeo and JWPlayer although it should be possible to integrate the player with almost any media player on
*    the web (provided a JavaScript api for the player in question is available).
*    
*    Copyright (C) 2012  Nomensa Ltd
*
*    Version 2.1.1 
*
*    This program is free software: you can redistribute it and/or modify
*    it under the terms of the GNU General Public License as published by
*    the Free Software Foundation, either version 3 of the License, or
*    (at your option) any later version.
*
*    This program is distributed in the hope that it will be useful,
*    but WITHOUT ANY WARRANTY; without even the implied warranty of
*    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
*    GNU General Public License for more details.
*
*    You should have received a copy of the GNU General Public License
*    along with this program.  If not, see <http://www.gnu.org/licenses/>.
**/
var swfobject=function(){function t(){if(!R){try{var t=P.getElementsByTagName("body")[0].appendChild(g("span"));t.parentNode.removeChild(t)}catch(e){return}R=!0;for(var i=B.length,n=0;i>n;n++)B[n]()}}function e(t){R?t():B[B.length]=t}function i(t){if(typeof D.addEventListener!=N)D.addEventListener("load",t,!1);else if(typeof P.addEventListener!=N)P.addEventListener("load",t,!1);else if(typeof D.attachEvent!=N)v(D,"onload",t);else if("function"==typeof D.onload){var e=D.onload;D.onload=function(){e(),t()}}else D.onload=t}function n(){F?a():s()}function a(){var t=P.getElementsByTagName("body")[0],e=g(O);e.setAttribute("type",A);var i=t.appendChild(e);if(i){var n=0;!function(){if(typeof i.GetVariable!=N){var a=i.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),W.pv=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)])}else if(10>n)return n++,setTimeout(arguments.callee,10),void 0;t.removeChild(e),i=null,s()}()}else s()}function s(){var t=L.length;if(t>0)for(var e=0;t>e;e++){var i=L[e].id,n=L[e].callbackFn,a={success:!1,id:i};if(W.pv[0]>0){var s=m(i);if(s)if(!y(L[e].swfVersion)||W.wk&&W.wk<312)if(L[e].expressInstall&&r()){var d={};d.data=L[e].expressInstall,d.width=s.getAttribute("width")||"0",d.height=s.getAttribute("height")||"0",s.getAttribute("class")&&(d.styleclass=s.getAttribute("class")),s.getAttribute("align")&&(d.align=s.getAttribute("align"));for(var c={},h=s.getElementsByTagName("param"),f=h.length,p=0;f>p;p++)"movie"!=h[p].getAttribute("name").toLowerCase()&&(c[h[p].getAttribute("name")]=h[p].getAttribute("value"));l(d,c,i,n)}else u(s),n&&n(a);else w(i,!0),n&&(a.success=!0,a.ref=o(i),n(a))}else if(w(i,!0),n){var g=o(i);g&&typeof g.SetVariable!=N&&(a.success=!0,a.ref=g),n(a)}}}function o(t){var e=null,i=m(t);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=N)e=i;else{var n=i.getElementsByTagName(O)[0];n&&(e=n)}return e}function r(){return!K&&y("6.0.65")&&(W.win||W.mac)&&!(W.wk&&W.wk<312)}function l(t,e,i,n){K=!0,k=n||null,x={success:!1,id:i};var a=m(i);if(a){"OBJECT"==a.nodeName?(C=d(a),S=null):(C=a,S=i),t.id=j,(typeof t.width==N||!/%$/.test(t.width)&&parseInt(t.width,10)<310)&&(t.width="310"),(typeof t.height==N||!/%$/.test(t.height)&&parseInt(t.height,10)<137)&&(t.height="137"),P.title=P.title.slice(0,47)+" - Flash Player Installation";var s=W.ie&&W.win?"ActiveX":"PlugIn",o="MMredirectURL="+D.location.toString().replace(/&/g,"%26")+"&MMplayerType="+s+"&MMdoctitle="+P.title;if(typeof e.flashvars!=N?e.flashvars+="&"+o:e.flashvars=o,W.ie&&W.win&&4!=a.readyState){var r=g("div");i+="SWFObjectNew",r.setAttribute("id",i),a.parentNode.insertBefore(r,a),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}c(t,e,i)}}function u(t){if(W.ie&&W.win&&4!=t.readyState){var e=g("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(d(t),e),t.style.display="none",function(){4==t.readyState?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(d(t),t)}function d(t){var e=g("div");if(W.win&&W.ie)e.innerHTML=t.innerHTML;else{var i=t.getElementsByTagName(O)[0];if(i){var n=i.childNodes;if(n)for(var a=n.length,s=0;a>s;s++)1==n[s].nodeType&&"PARAM"==n[s].nodeName||8==n[s].nodeType||e.appendChild(n[s].cloneNode(!0))}}return e}function c(t,e,i){var n,a=m(i);if(W.wk&&W.wk<312)return n;if(a)if(typeof t.id==N&&(t.id=i),W.ie&&W.win){var s="";for(var o in t)t[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?e.movie=t[o]:"styleclass"==o.toLowerCase()?s+=' class="'+t[o]+'"':"classid"!=o.toLowerCase()&&(s+=" "+o+'="'+t[o]+'"'));var r="";for(var l in e)e[l]!=Object.prototype[l]&&(r+='<param name="'+l+'" value="'+e[l]+'" />');a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+s+">"+r+"</object>",U[U.length]=t.id,n=m(t.id)}else{var u=g(O);u.setAttribute("type",A);for(var d in t)t[d]!=Object.prototype[d]&&("styleclass"==d.toLowerCase()?u.setAttribute("class",t[d]):"classid"!=d.toLowerCase()&&u.setAttribute(d,t[d]));for(var c in e)e[c]!=Object.prototype[c]&&"movie"!=c.toLowerCase()&&h(u,c,e[c]);a.parentNode.replaceChild(u,a),n=u}return n}function h(t,e,i){var n=g("param");n.setAttribute("name",e),n.setAttribute("value",i),t.appendChild(n)}function f(t){var e=m(t);e&&"OBJECT"==e.nodeName&&(W.ie&&W.win?(e.style.display="none",function(){4==e.readyState?p(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))}function p(t){var e=m(t);if(e){for(var i in e)"function"==typeof e[i]&&(e[i]=null);e.parentNode.removeChild(e)}}function m(t){var e=null;try{e=P.getElementById(t)}catch(i){}return e}function g(t){return P.createElement(t)}function v(t,e,i){t.attachEvent(e,i),G[G.length]=[t,e,i]}function y(t){var e=W.pv,i=t.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,e[0]>i[0]||e[0]==i[0]&&e[1]>i[1]||e[0]==i[0]&&e[1]==i[1]&&e[2]>=i[2]?!0:!1}function b(t,e,i,n){if(!W.ie||!W.mac){var a=P.getElementsByTagName("head")[0];if(a){var s=i&&"string"==typeof i?i:"screen";if(n&&(E=null,T=null),!E||T!=s){var o=g("style");o.setAttribute("type","text/css"),o.setAttribute("media",s),E=a.appendChild(o),W.ie&&W.win&&typeof P.styleSheets!=N&&P.styleSheets.length>0&&(E=P.styleSheets[P.styleSheets.length-1]),T=s}W.ie&&W.win?E&&typeof E.addRule==O&&E.addRule(t,e):E&&typeof P.createTextNode!=N&&E.appendChild(P.createTextNode(t+" {"+e+"}"))}}}function w(t,e){if(H){var i=e?"visible":"hidden";R&&m(t)?m(t).style.visibility=i:b("#"+t,"visibility:"+i)}}function _(t){var e=/[\\\"<>\.;]/,i=null!=e.exec(t);return i&&typeof encodeURIComponent!=N?encodeURIComponent(t):t}var C,S,k,x,E,T,N="undefined",O="object",$="Shockwave Flash",M="ShockwaveFlash.ShockwaveFlash",A="application/x-shockwave-flash",j="SWFObjectExprInst",I="onreadystatechange",D=window,P=document,V=navigator,F=!1,B=[n],L=[],U=[],G=[],R=!1,K=!1,H=!0,W=function(){var t=typeof P.getElementById!=N&&typeof P.getElementsByTagName!=N&&typeof P.createElement!=N,e=V.userAgent.toLowerCase(),i=V.platform.toLowerCase(),n=i?/win/.test(i):/win/.test(e),a=i?/mac/.test(i):/mac/.test(e),s=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,o=!1,r=[0,0,0],l=null;if(typeof V.plugins!=N&&typeof V.plugins[$]==O)l=V.plugins[$].description,!l||typeof V.mimeTypes!=N&&V.mimeTypes[A]&&!V.mimeTypes[A].enabledPlugin||(F=!0,o=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),r[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),r[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),r[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof D.ActiveXObject!=N)try{var u=new ActiveXObject(M);u&&(l=u.GetVariable("$version"),l&&(o=!0,l=l.split(" ")[1].split(","),r=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(d){}return{w3:t,pv:r,wk:s,ie:o,win:n,mac:a}}();return function(){W.w3&&((typeof P.readyState!=N&&"complete"==P.readyState||typeof P.readyState==N&&(P.getElementsByTagName("body")[0]||P.body))&&t(),R||(typeof P.addEventListener!=N&&P.addEventListener("DOMContentLoaded",t,!1),W.ie&&W.win&&(P.attachEvent(I,function(){"complete"==P.readyState&&(P.detachEvent(I,arguments.callee),t())}),D==top&&function(){if(!R){try{P.documentElement.doScroll("left")}catch(e){return setTimeout(arguments.callee,0),void 0}t()}}()),W.wk&&function(){return R?void 0:/loaded|complete/.test(P.readyState)?(t(),void 0):(setTimeout(arguments.callee,0),void 0)}(),i(t)))}(),function(){W.ie&&W.win&&window.attachEvent("onunload",function(){for(var t=G.length,e=0;t>e;e++)G[e][0].detachEvent(G[e][1],G[e][2]);for(var i=U.length,n=0;i>n;n++)f(U[n]);for(var a in W)W[a]=null;W=null;for(var s in swfobject)swfobject[s]=null;swfobject=null})}(),{registerObject:function(t,e,i,n){if(W.w3&&t&&e){var a={};a.id=t,a.swfVersion=e,a.expressInstall=i,a.callbackFn=n,L[L.length]=a,w(t,!1)}else n&&n({success:!1,id:t})},getObjectById:function(t){return W.w3?o(t):void 0},embedSWF:function(t,i,n,a,s,o,u,d,h,f){var p={success:!1,id:i};W.w3&&!(W.wk&&W.wk<312)&&t&&i&&n&&a&&s?(w(i,!1),e(function(){n+="",a+="";var e={};if(h&&typeof h===O)for(var m in h)e[m]=h[m];e.data=t,e.width=n,e.height=a;var g={};if(d&&typeof d===O)for(var v in d)g[v]=d[v];if(u&&typeof u===O)for(var b in u)typeof g.flashvars!=N?g.flashvars+="&"+b+"="+u[b]:g.flashvars=b+"="+u[b];if(y(s)){var _=c(e,g,i);e.id==i&&w(i,!0),p.success=!0,p.ref=_}else{if(o&&r())return e.data=o,l(e,g,i,f),void 0;w(i,!0)}f&&f(p)})):f&&f(p)},switchOffAutoHideShow:function(){H=!1},ua:W,getFlashPlayerVersion:function(){return{major:W.pv[0],minor:W.pv[1],release:W.pv[2]}},hasFlashPlayerVersion:y,createSWF:function(t,e,i){return W.w3?c(t,e,i):void 0},showExpressInstall:function(t,e,i,n){W.w3&&r()&&l(t,e,i,n)},removeSWF:function(t){W.w3&&f(t)},createCSS:function(t,e,i,n){W.w3&&b(t,e,i,n)},addDomLoadEvent:e,addLoadEvent:i,getQueryParamValue:function(t){var e=P.location.search||P.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return _(e);for(var i=e.split("&"),n=0;n<i.length;n++)if(i[n].substring(0,i[n].indexOf("="))==t)return _(i[n].substring(i[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(K){var t=m(j);t&&C&&(t.parentNode.replaceChild(C,t),S&&(w(S,!0),W.ie&&W.win&&(C.style.display="block")),k&&k(x)),K=!1}}}}();window.NOMENSA=window.NOMENSA||{},window.NOMENSA.player=window.NOMENSA.player||{},window.NOMENSA.player.YoutubePlayer=function(t){this.config=t,this.config.playerVars={controls:0,showinfo:0,origin:window.location.protocol+"//"+window.location.hostname,rel:0}},window.NOMENSA.player.YoutubePlayer.apiLoaded=!1,window.NOMENSA.player.YoutubePlayer.prototype={getYTOptions:function(){var t=this,e={height:this.config.flashHeight,width:this.config.flashWidth,videoId:this.config.media,events:{onReady:function(e){t.$html.find("iframe").attr({id:t.config.id,role:"presentation"}),t.onPlayerReady(e)},onStateChange:function(e){t.onPlayerStateChange(e.data)}}};return e.playerVars=this.config.playerVars,this.config.repeat&&(e.playerVars.playlist=this.config.media),e},init:function(){return"undefined"!=typeof window.postMessage?function(t){var e=document.createElement("script"),i=document.getElementsByTagName("script")[0];this.$html=this.assembleHTML(),this.config.captions&&this.getCaptions(),t.html(this.$html),window.NOMENSA.player.PlayerDaemon.addPlayer(this),window.NOMENSA.player.YoutubePlayer.apiLoaded?this.player=YT.Player("player-"+player.config.id,getOptions(player)):"undefined"==typeof window.onYouTubeIframeAPIReady&&(window.onYouTubeIframeAPIReady=function(){window.NOMENSA.player.PlayerDaemon.map(function(t){"undefined"!=typeof t.getYTOptions&&(t.player=new YT.Player("player-"+t.config.id,t.getYTOptions()))}),window.NOMENSA.player.YoutubePlayer.apiLoaded=!0},e.src="//www.youtube.com/iframe_api",i.parentNode.insertBefore(e,i))}:function(t){var e=this;this.$html=this.assembleHTML(),this.config.captions&&this.getCaptions(),t.html(this.$html),window.NOMENSA.player.PlayerDaemon.addPlayer(this),window.NOMENSA.player.stateHandlers[this.config.id]=function(t){var i=window.NOMENSA.player.PlayerDaemon.getPlayer(e.config.id);i.onPlayerStateChange(t)},window.onYouTubePlayerReady=function(t){var i=window.NOMENSA.player.PlayerDaemon.getPlayer(t),n=document.getElementById(i.config.id);i.player=n,i.cue(),i.getPlayer().addEventListener("onStateChange","window.NOMENSA.player.stateHandlers."+e.config.id),i.onPlayerReady()}}}(),state:{ended:0,playing:1,paused:2,unstarted:-1},onPlayerReady:function(){var t,e=[];return function(i){var n=e.length;if("function"==typeof i)e.push(i);else{if(0===n)return!1;for(t=0;n>t;t++)e[t].apply(this,arguments)}}}(),onPlayerStateChange:function(t){1==t?(this.play(),this.config.buttons.toggle&&this.$html.find(".play").removeClass("play").addClass("pause").text("Pause")):this.config.repeat&&0==t&&this.play()},getFlashVars:function(){var t={controlbar:"none",file:this.config.media};return""!=this.config.image&&(t.image=this.config.image),this.config.repeat&&(t.repeat=this.config.repeat),t},getFlashParams:function(){return{allowScriptAccess:"always",wmode:"transparent"}},generateFlashPlayer:function(t){var e=this,i=this.getFlashVars(),n=this.getFlashParams(),a={id:this.config.id,name:this.config.id},s=$("<"+this.config.flashContainer+" />").attr("id","player-"+this.config.id).addClass("flashReplace").html('This content requires Macromedia Flash Player. You can <a href="http://get.adobe.com/flashplayer/">install or upgrade the Adobe Flash Player here</a>.'),o=$("<span />").addClass("video"),r=this.getURL();return setTimeout(function(){swfobject.embedSWF(r,s.attr("id"),e.config.flashWidth,e.config.flashHeight,"9.0.115",null,i,n,a,e.config.swfCallback),$.browser.mozilla&&parseInt($.browser.version,10)>=2&&e.$html.find("object").attr("tabindex","-1")},0),t.append(o.append(s)),t},generateVideoPlayer:function(t){if("undefined"==typeof window.postMessage)return this.generateFlashPlayer(t);var e=$("<"+this.config.flashContainer+" />").attr("id","player-"+this.config.id),i=$("<span />").addClass("video");return t.append(i.append(e)),t},getPlayer:function(){return this.player},is_html5:!1,play:function(){this.player.playVideo(),this.setSliderTimeout(),this.config.captionsOn&&this.captions&&this.setCaptionTimeout()},pause:function(){this.player.pauseVideo(),this.clearSliderTimeout(),this.config.captionsOn&&this.captions&&this.clearCaptionTimeout()},ffwd:function(){var t=this.getCurrentTime()+this.config.playerSkip,e=this.getDuration();t>e&&(t=e),this.seek(t)},rewd:function(){var t=this.getCurrentTime()-this.config.playerSkip;0>t&&(t=0),this.seek(t)},mute:function(){var t=this.$html.find("button.mute");this.player.isMuted()?(this.player.unMute(),t.hasClass("muted")&&t.removeClass("muted")):(this.player.mute(),t.addClass("muted"))},volup:function(){var t=this.player.getVolume();t>=100?t=100:t+=this.config.volumeStep,this.player.setVolume(t),this.updateVolume(t)},voldwn:function(){var t=this.player.getVolume();0>=t?t=0:t-=this.config.volumeStep,this.player.setVolume(t),this.updateVolume(t)},getDuration:function(){return this.player.getDuration()},getCurrentTime:function(){return this.player.getCurrentTime()},getBytesLoaded:function(){return this.player.getVideoBytesLoaded()},getBytesTotal:function(){return this.player.getVideoBytesTotal()},seek:function(t){this.player.seekTo(t,!0),this.config.captionsOn&&this.captions&&(this.$html.find(".caption").remove(),this.clearCaptionTimeout(),this.setCaptionTimeout(),this.getPreviousCaption())},cue:function(){this.player.cueVideoById(this.config.media)},toggleCaptions:function(){var t=this,e=this.$html.find(".captions");e.hasClass("captions-off")?(e.removeClass("captions-off").addClass("captions-on"),t.getPreviousCaption(),t.setCaptionTimeout(),t.config.captionsOn=!0):(e.removeClass("captions-on").addClass("captions-off"),t.clearCaptionTimeout(),t.$html.find(".caption").remove(),t.config.captionsOn=!1)}},window.NOMENSA=window.NOMENSA||{},window.NOMENSA.player=window.NOMENSA.player||{},window.NOMENSA.player.MediaplayerDecorator=function(t){var e=t;this.config=e.config,this.player=e.player,this.state=e.state;for(var i in e)"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(this,arguments)}}(i))},window.NOMENSA.player.MediaplayerDecorator.prototype.generatePlayerContainer=function(){var t=$("<"+this.config.playerContainer+" />").css(this.config.playerStyles).addClass("player-container");return $.browser.msie&&t.addClass("player-container-ie player-container-ie-"+$.browser.version.substring(0,1)),t},window.NOMENSA.player.MediaplayerDecorator.prototype.assembleHTML=function(){var t=this.generatePlayerContainer(),e=this.generateVideoPlayer(t),i=e.append(this.getControls());return i},window.NOMENSA.player.MediaplayerDecorator.prototype.getURL=function(){return[this.config.url,this.config.id].join("")},window.NOMENSA.player.MediaplayerDecorator.prototype.createButton=function(t,e){var i=[t,this.config.id].join("-"),n=$("<button />").append(e).addClass(t).attr({title:t,id:i}).addClass("ui-corner-all ui-state-default").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}).focus(function(){$(this).addClass("ui-state-focus")}).blur(function(){$(this).removeClass("ui-state-focus")}).click(function(t){t.preventDefault()});return n},window.NOMENSA.player.MediaplayerDecorator.prototype.getFuncControls=function(){var t=this,e=$("<div>");e[0].className="player-controls";var i=[];if(t.config.buttons.toggle){var n=t.createButton("play","Play").attr({"aria-live":"assertive"}).click(function(){$(this).hasClass("play")?($(this).removeClass("play").addClass("pause").attr({title:"Pause",id:"pause-"+t.config.id}).text("Pause"),t.play()):($(this).removeClass("pause").addClass("play").attr({title:"Play",id:"play-"+t.config.id}).text("Play"),t.pause())});i.push(n)}else{var a=t.createButton("play","Play").click(function(){t.play()}),s=t.createButton("pause","Pause").click(function(){t.pause()});i.push(a),i.push(s)}if(t.config.buttons.rewind){var o=t.createButton("rewind","Rewind").click(function(){t.rewd()});i.push(o)}if(t.config.buttons.forward){var r=t.createButton("forward","Forward").click(function(){t.ffwd()});i.push(r)}if(t.config.captions){var l=t.createButton("captions","Captions").click(function(){t.toggleCaptions()}),u=1==t.config.captionsOn?"captions-on":"captions-off";l.addClass(u),i.push(l)}for(var d=0;d<i.length;d+=1)e[0].appendChild(i[d][0]);return e},window.NOMENSA.player.MediaplayerDecorator.prototype.getVolControls=function(){for(var t=this,e=$("<div>").addClass("volume-controls"),i=t.createButton("mute","Mute").click(function(){t.mute()}),n=t.createButton("vol-up",'+<span class="ui-helper-hidden-accessible"> Volume Up</span>').click(function(){t.volup()}),a=t.createButton("vol-down",'-<span class="ui-helper-hidden-accessible"> Volume Down</span>').click(function(){t.voldwn()}),s=$("<span />").attr({id:"vol-"+t.config.id,"class":"vol-display"}).text("100%"),o=[i,a,n,s],r=0;r<o.length;r+=1)e[0].appendChild(o[r][0]);return e},window.NOMENSA.player.MediaplayerDecorator.prototype.getSliderBar=function(){for(var t=$("<span />").addClass("ui-helper-hidden-accessible").html("<p>The timeline slider below uses WAI ARIA. Please use the documentation for your screen reader to find out more.</p>"),e=$("<span />").addClass("current-time").attr({id:"current-"+this.config.id}).text("00:00:00"),i=this.getSlider(),n=$("<span />").addClass("duration-time").attr({id:"duration-"+this.config.id}).text("00:00:00"),a=$("<div />").addClass("timer-bar").append(t),s=[e,i,n],o=0;o<s.length;o+=1)a[0].appendChild(s[o][0]);return a},window.NOMENSA.player.MediaplayerDecorator.prototype.getSlider=function(){var t=this,e=$("<span />").attr("id","slider-"+this.config.id).slider({orientation:"horizontal",change:function(e,i){var n=i.value,a=n/100*t.getDuration();t.seek(a)}});e.find("a.ui-slider-handle").attr({role:"slider","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"0","aria-valuetext":"0 percent",title:"Slider Control"});var i=$("<span />").addClass("progress-bar").attr({id:"progress-bar-"+this.config.id,tabindex:"-1"}).addClass("ui-progressbar-value ui-widget-header ui-corner-left").css({width:"0%",height:"95%"}),n=$("<span />").attr({id:"loaded-bar-"+this.config.id,tabindex:"-1"}).addClass("loaded-bar ui-progressbar-value ui-widget-header ui-corner-left").css({height:"95%",width:"0%"});return e.append(i,n)},window.NOMENSA.player.MediaplayerDecorator.prototype.setSliderTimeout=function(){var t=this;void 0==t.sliderInterval&&(t.sliderInterval=setInterval(function(){t.updateSlider()},t.config.sliderTimeout))},window.NOMENSA.player.MediaplayerDecorator.prototype.clearSliderTimeout=function(){var t=this;void 0!=t.sliderInterval&&(t.sliderInterval=clearInterval(t.sliderInterval))},window.NOMENSA.player.MediaplayerDecorator.prototype.updateSlider=function(){var t="undefined"!=typeof this.duration?this.duration:this.getDuration(),e="boolean"==typeof this.duration_found?this.duration_found:!1,i=this.getCurrentTime(),n=0;t>0?(n=100*(i/t),n=parseInt(n,10)):t=0,e||($("#duration-"+this.config.id).html(this.formatTime(parseInt(t,10))),this.duration_found=!0),$("#slider-"+this.config.id).find("a.ui-slider-handle").attr({"aria-valuenow":n,"aria-valuetext":n.toString()+" percent"}).css("left",n.toString()+"%"),$("#progress-bar-"+this.config.id).attr({"aria-valuenow":n,"aria-valuetext":n.toString()+" percent"}).css("width",n.toString()+"%"),this.updateLoaderBar(),this.updateTime(i)},window.NOMENSA.player.MediaplayerDecorator.prototype.updateLoaderBar=function(){var t=100*(this.getBytesLoaded()/this.getBytesTotal());t=parseInt(t,10),isFinite(t)||(t=0),$("#loaded-bar-"+this.config.id).attr({"aria-valuetext":t.toString()+" percent","aria-valuenow":t}).css("width",t.toString()+"%")},window.NOMENSA.player.MediaplayerDecorator.prototype.formatTime=function(t){var e=0,i=0,n=0;t>=60?(i=parseInt(t/60,10),n=t-60*i,i>=60&&(e=parseInt(i/60,10),i-=parseInt(60*e,10))):n=t;for(var a=[e,i,n],s=0;s<a.length;s+=1)a[s]=a[s]<10?"0"+a[s].toString():a[s].toString();return a.join(":")},window.NOMENSA.player.MediaplayerDecorator.prototype.updateTime=function(t){var e=this.formatTime(parseInt(t,10));this.$html.find("#current-"+this.config.id).html(e)},window.NOMENSA.player.MediaplayerDecorator.prototype.getControls=function(){var t=$("<span />").addClass("ui-corner-bottom").addClass("control-bar"),e=$("<a />").attr("href","http://www.nomensa.com?ref=logo").html("Accessible Media Player by Nomensa").addClass("logo");t.append(e);for(var i=this.getFuncControls(),n=this.getVolControls(),a=this.getSliderBar(),s=[i,n,a],o=0;o<s.length;o+=1)t[0].appendChild(s[o][0]);return t},window.NOMENSA.player.MediaplayerDecorator.prototype.updateVolume=function(t){$("#vol-"+this.config.id).text(t.toString()+"%");var e=this.$html.find("button.mute");0==t?e.addClass("muted"):e.hasClass("muted")&&e.removeClass("muted")},window.NOMENSA.player.MediaplayerDecorator.prototype.getCaptions=function(){var t=this;t.config.captions&&$.ajax({url:t.config.captions,success:function(e){$(e).find("p").length>0&&(t.captions=$(e).find("p"))}})},window.NOMENSA.player.MediaplayerDecorator.prototype.toggleCaptions=function(){var t=this,e=this.$html.find(".captions");e.hasClass("captions-off")?(e.removeClass("captions-off").addClass("captions-on"),t.getPreviousCaption(),t.setCaptionTimeout(),t.config.captionsOn=!0):(e.removeClass("captions-on").addClass("captions-off"),t.clearCaptionTimeout(),t.$html.find(".caption").remove(),t.config.captionsOn=!1)},window.NOMENSA.player.MediaplayerDecorator.prototype.syncCaptions=function(){var t;if(this.captions){var e=this.getCurrentTime();e=this.formatTime(parseInt(e,10)),t=this.captions.filter('[begin="'+e+'"]'),1==t.length&&this.insertCaption(t)}},window.NOMENSA.player.MediaplayerDecorator.prototype.insertCaption=function(t){if(1==this.$html.find(".caption").length)this.$html.find(".caption").text(t.text());else{var e=$("<div>").text(t.text());e[0].className="caption",this.$html.find(".video").prepend(e)}},window.NOMENSA.player.MediaplayerDecorator.prototype.getPreviousCaption=function(t){var e;void 0==t&&(t=this.getCurrentTime());var i=this.formatTime(parseInt(t,10));if(this.captions){for(e=this.captions.filter('[begin="'+i+'"]');1!=e.length&&t>0;)t--,i=this.formatTime(parseInt(t,10)),e=this.captions.filter('[begin="'+i+'"]');1==e.length&&this.insertCaption(e)}},window.NOMENSA.player.MediaplayerDecorator.prototype.destroyPlayerInstance=function(){return!1},window.NOMENSA.player.MediaplayerDecorator.prototype.destroy=function(){this.clearSliderTimeout(),this.clearCaptionTimeout(),this.destroyPlayerInstance(),this.$html.remove()},window.NOMENSA.player.MediaplayerDecorator.prototype.setCaptionTimeout=function(){var t=this;void 0==t.captionInterval&&(t.captionInterval=setInterval(function(){t.syncCaptions()},500))},window.NOMENSA.player.MediaplayerDecorator.prototype.clearCaptionTimeout=function(){void 0!=this.captionInterval&&(this.captionInterval=clearInterval(this.captionInterval))},window.NOMENSA=window.NOMENSA||{},window.NOMENSA.player=window.NOMENSA.player||{},jQuery(function(t){t(window).resize(function(){t(".player-container").each(function(){t(this).width()>580?t(this).addClass("player-wide"):t(this).removeClass("player-wide")})})}),"undefined"==typeof window.postMessage&&(window.NOMENSA.player.stateHandlers={}),window.NOMENSA.player.PlayerManager=function(){var t={};this.getPlayer=function(e){return void 0!=t[e]?t[e]:null},this.addPlayer=function(e){return t[e.config.id]=e,!0},this.removePlayer=function(e){void 0!=t[e]&&(t[e].destroy(),delete t[e])},this.map=function(e){var i;for(i in t)e(t[i])}},window.NOMENSA.player.PlayerDaemon=new window.NOMENSA.player.PlayerManager;var html5_methods={play:function(){this.player.play(),this.setSliderTimeout(),this.config.captionsOn&&this.captions&&this.setCaptionTimeout()},pause:function(){this.player.pause(),this.clearSliderTimeout(),this.config.captionsOn&&this.captions&&this.clearCaptionTimeout()},ffwd:function(){var t=this.getCurrentTime()+this.config.playerSkip;this.seek(t)},rewd:function(){var t=this.getCurrentTime()-this.config.playerSkip;0>t&&(t=0),this.seek(t)},mute:function(){var t=this.$html.find("button.mute");this.player.muted?(this.player.muted=!1,t.hasClass("muted")&&t.removeClass("muted")):(this.player.muted=!0,t.addClass("muted"))},volup:function(){var t=100*this.player.volume;t<100-this.config.volumeStep?t+=this.config.volumeStep:t=100,this.player.volume=t/100,this.updateVolume(Math.round(t))},voldwn:function(){var t=100*this.player.volume;t>this.config.volumeStep?t-=this.config.volumeStep:t=0,this.player.volume=t/100,this.updateVolume(Math.round(t))},getDuration:function(){return this.player.duration},getCurrentTime:function(){return this.player.currentTime},getBytesLoaded:function(){return this.player.buffered.end(0)},getBytesTotal:function(){return this.player.duration},seek:function(t){this.player.currentTime=t},cue:function(){}};!function(t){t.fn.player=function(e,i){function n(){this.config=s,t.extend(!0,this,d,i),this.is_html5=!1;var e=l(this);e&&o(e.mimetype,e.container)&&this.config.useHtml5?(this.is_html5=!0,this.$html=this.assembleHTML5(e.container,e.mimetype),t.extend(this,html5_methods)):this.$html=this.assembleHTML(),this.config.captions&&this.getCaptions()}var a={id:"media_player",url:window.location.protocol+"//www.youtube.com/apiplayer?enablejsapi=1&version=3&playerapiid=",media:"8LiQ-bLJaM4",repeat:!1,captions:null,captionsOn:!0,flashWidth:"100%",flashHeight:"300px",playerStyles:{height:"100%",width:"100%"},sliderTimeout:350,flashContainer:"span",playerContainer:"span",image:"",playerSkip:10,volumeStep:10,buttons:{forward:!0,rewind:!0,toggle:!0},logoURL:"http://www.nomensa.com?ref=logo",useHtml5:!0,swfCallback:null},s=t.extend(!0,{},a,e),o=function(t,e){var i=document.createElement(e);if(void 0!=i.canPlayType){var n=i.canPlayType(t);if("maybe"==n.toLowerCase()||"probably"==n.toLowerCase())return!0}return!1},r=function(t){var e="",i="video";switch(t){case"mp4":e='video/mp4; codecs="avc1.42E01E, mp4a.40.2"';break;case"m4v":e='video/mp4; codecs="avc1.42E01E, mp4a.40.2"';break;case"ogg":e='video/ogg; codecs="theora, vorbis"';break;case"ogv":e='video/ogg; codecs="theora, vorbis"';break;case"webm":e='video/webm; codecs="vp8, vorbis"';break;case"mp3":e="audio/mpeg",i="audio"}return{mimetype:e,container:i}},l=function(t){var e=t.config.media,i=e.lastIndexOf(".");if(-1!=i){var n=e.substring(i+1),a=r(n);return a}return null},u=function(){return t.browser.mozilla?parseInt(t.browser.version,10)>=2?!0:!1:!1},d={generatePlayerContainer:function(){var e=t("<"+this.config.playerContainer+" />").css(this.config.playerStyles).addClass("player-container");return t.browser.msie&&e.addClass("player-container-ie player-container-ie-"+t.browser.version.substring(0,1)),e},getFlashVars:function(){var t={controlbar:"none",file:this.config.media};return""!=this.config.image&&(t.image=this.config.image),this.config.repeat&&(t.repeat=this.config.repeat),t},getFlashParams:function(){return{allowScriptAccess:"always",wmode:"transparent"}},getURL:function(){return[this.config.url,this.config.id].join("")},generateFlashPlayer:function(e){var i=this,n=this.getFlashVars(),a=this.getFlashParams(),s={id:this.config.id,name:this.config.id},o=t("<"+this.config.flashContainer+" />").attr("id","player-"+this.config.id).addClass("flashReplace").html('This content requires Macromedia Flash Player. You can <a href="http://get.adobe.com/flashplayer/">install or upgrade the Adobe Flash Player here</a>.'),r=t("<span />").addClass("video"),l=this.getURL();return setTimeout(function(){swfobject.embedSWF(l,o.attr("id"),i.config.flashWidth,i.config.flashHeight,"9.0.115",null,n,a,s,i.config.swfCallback),u()&&i.$html.find("object").attr("tabindex","-1")},0),e.append(r.append(o)),e},generateHTML5Player:function(e,i,n){var a=t("<span />");a[0].className="video";var s=t("<"+i+" />").attr({id:this.config.id,src:this.config.media,type:n}).css({width:"100%",height:"50%"});return""!=t.trim(this.config.image)&&s.attr({poster:t.trim(this.config.image)}),e.append(a.append(s))},createButton:function(e,i){var n=[e,this.config.id].join("-"),a=t("<button />").append(i).addClass(e).attr({title:e,id:n}).addClass("ui-corner-all ui-state-default").hover(function(){t(this).addClass("ui-state-hover")},function(){t(this).removeClass("ui-state-hover")}).focus(function(){t(this).addClass("ui-state-focus")}).blur(function(){t(this).removeClass("ui-state-focus")}).click(function(t){t.preventDefault()});return a},getFuncControls:function(){var e=this,i=t("<div>");i[0].className="player-controls";var n=[];if(e.config.buttons.toggle){var a=e.createButton("play","Play").attr({"aria-live":"assertive"}).click(function(){t(this).hasClass("play")?(t(this).removeClass("play").addClass("pause").attr({title:"Pause",id:"pause-"+e.config.id}).text("Pause"),e.play()):(t(this).removeClass("pause").addClass("play").attr({title:"Play",id:"play-"+e.config.id}).text("Play"),e.pause())});n.push(a)}else{var s=e.createButton("play","Play").click(function(){e.play()}),o=e.createButton("pause","Pause").click(function(){e.pause()});n.push(s),n.push(o)}if(e.config.buttons.rewind){var r=e.createButton("rewind","Rewind").click(function(){e.rewd()});n.push(r)}if(e.config.buttons.forward){var l=e.createButton("forward","Forward").click(function(){e.ffwd()});n.push(l)}if(e.config.captions){var u=e.createButton("captions","Captions").click(function(){e.toggleCaptions()}),d=1==e.config.captionsOn?"captions-on":"captions-off";u.addClass(d),n.push(u)}var c;for(c=0;c<n.length;c+=1)i[0].appendChild(n[c][0]);return i},getVolControls:function(){var e,i=this,n=t("<div>").addClass("volume-controls"),a=i.createButton("mute","Mute").click(function(){i.mute()}),s=i.createButton("vol-up",'+<span class="ui-helper-hidden-accessible"> Volume Up</span>').click(function(){i.volup()}),o=i.createButton("vol-down",'-<span class="ui-helper-hidden-accessible"> Volume Down</span>').click(function(){i.voldwn()}),r=t("<span />").attr({id:"vol-"+i.config.id,"class":"vol-display"}).text("100%"),l=[a,o,s,r];for(e=0;e<l.length;e+=1)n[0].appendChild(l[e][0]);return n},getSliderBar:function(){var e,i=t("<span />").addClass("ui-helper-hidden-accessible").html("<p>The timeline slider below uses WAI ARIA. Please use the documentation for your screen reader to find out more.</p>"),n=t("<span />").addClass("current-time").attr({id:"current-"+this.config.id}).text("00:00:00"),a=this.getSlider(),s=t("<span />").addClass("duration-time").attr({id:"duration-"+this.config.id}).text("00:00:00"),o=t("<div />").addClass("timer-bar").append(i),r=[n,a,s];for(e=0;e<r.length;e+=1)o[0].appendChild(r[e][0]);return o},getSlider:function(){var e=this,i=t("<span />").attr("id","slider-"+this.config.id).slider({orientation:"horizontal",change:function(t,i){var n=i.value,a=n/100*e.getDuration();e.seek(a)}});i.find("a.ui-slider-handle").attr({role:"slider","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"0","aria-valuetext":"0 percent",title:"Slider Control"});var n=t("<span />").addClass("progress-bar").attr({id:"progress-bar-"+this.config.id,tabindex:"-1"}).addClass("ui-progressbar-value ui-widget-header ui-corner-left").css({width:"0%",height:"95%"}),a=t("<span />").attr({id:"loaded-bar-"+this.config.id,tabindex:"-1"}).addClass("loaded-bar ui-progressbar-value ui-widget-header ui-corner-left").css({height:"95%",width:"0%"});return i.append(n,a)},setSliderTimeout:function(){var t=this;void 0==t.sliderInterval&&(t.sliderInterval=setInterval(function(){t.updateSlider()},t.config.sliderTimeout))},clearSliderTimeout:function(){var t=this;void 0!=t.sliderInterval&&(t.sliderInterval=clearInterval(t.sliderInterval))},updateSlider:function(){var e="undefined"!=typeof this.duration?this.duration:this.getDuration(),i="boolean"==typeof this.duration_found?this.duration_found:!1,n=this.getCurrentTime(),a=0;
e>0?(a=100*(n/e),a=parseInt(a,10)):e=0,i||(t("#duration-"+this.config.id).html(this.formatTime(parseInt(e,10))),this.duration_found=!0),t("#slider-"+this.config.id).find("a.ui-slider-handle").attr({"aria-valuenow":a,"aria-valuetext":a.toString()+" percent"}).css("left",a.toString()+"%"),t("#progress-bar-"+this.config.id).attr({"aria-valuenow":a,"aria-valuetext":a.toString()+" percent"}).css("width",a.toString()+"%"),this.updateLoaderBar(),this.updateTime(n)},updateLoaderBar:function(){var e=100*(this.getBytesLoaded()/this.getBytesTotal());e=parseInt(e,10),isFinite(e)||(e=0),t("#loaded-bar-"+this.config.id).attr({"aria-valuetext":e.toString()+" percent","aria-valuenow":e}).css("width",e.toString()+"%")},formatTime:function(t){var e=0,i=0,n=0;t>=60?(i=parseInt(t/60,10),n=t-60*i,i>=60&&(e=parseInt(i/60,10),i-=parseInt(60*e,10))):n=t;var a,s=[e,i,n];for(a=0;a<s.length;a+=1)s[a]=s[a]<10?"0"+s[a].toString():s[a].toString();return s.join(":")},updateTime:function(t){var e=this.formatTime(parseInt(t,10));this.$html.find("#current-"+this.config.id).html(e)},getControls:function(){var e=t("<span />").addClass("ui-corner-bottom").addClass("control-bar"),i=t("<a />").attr("href","http://www.nomensa.com?ref=logo").html("Accessible Media Player by Nomensa").addClass("logo");e.append(i);var n,a=this.getFuncControls(),s=this.getVolControls(),o=this.getSliderBar(),r=[a,s,o];for(n=0;n<r.length;n+=1)e[0].appendChild(r[n][0]);return e},assembleHTML:function(){var t=this.generatePlayerContainer(),e=this.generateFlashPlayer(t),i=e.append(this.getControls());return i},assembleHTML5:function(t,e){var i=this.generatePlayerContainer(),n=this.generateHTML5Player(i,t,e),a=n.append(this.getControls());return a},updateVolume:function(e){t("#vol-"+this.config.id).text(e.toString()+"%");var i=this.$html.find("button.mute");0==e?i.addClass("muted"):i.hasClass("muted")&&i.removeClass("muted")},getCaptions:function(){var e=this;e.config.captions&&t.ajax({url:e.config.captions,success:function(i){t(i).find("p").length>0&&(e.captions=t(i).find("p"))}})},syncCaptions:function(){var t;if(this.captions){var e=this.getCurrentTime();e=this.formatTime(parseInt(e,10)),t=this.captions.filter('[begin="'+e+'"]'),1==t.length&&this.insertCaption(t)}},insertCaption:function(e){if(1==this.$html.find(".caption").length)this.$html.find(".caption").text(e.text());else{var i=t("<div>").text(e.text());i[0].className="caption",this.$html.find(".video").prepend(i)}},getPreviousCaption:function(t){var e;void 0==t&&(t=this.getCurrentTime());var i=this.formatTime(parseInt(t,10));if(this.captions){for(e=this.captions.filter('[begin="'+i+'"]');1!=e.length&&t>0;)t--,i=this.formatTime(parseInt(t,10)),e=this.captions.filter('[begin="'+i+'"]');1==e.length&&this.insertCaption(e)}},destroyPlayerInstance:function(){return!1},destroy:function(){this.clearSliderTimeout(),this.clearCaptionTimeout(),this.destroyPlayerInstance(),this.$html.remove()},setCaptionTimeout:function(){var t=this;void 0==t.captionInterval&&(t.captionInterval=setInterval(function(){t.syncCaptions()},500))},clearCaptionTimeout:function(){void 0!=this.captionInterval&&(this.captionInterval=clearInterval(this.captionInterval))},play:function(){this.player.playVideo(),this.setSliderTimeout(),this.config.captionsOn&&this.captions&&this.setCaptionTimeout()},pause:function(){this.player.pauseVideo(),this.clearSliderTimeout(),this.config.captionsOn&&this.captions&&this.clearCaptionTimeout()},ffwd:function(){var t=this.getCurrentTime()+this.config.playerSkip;this.seek(t)},rewd:function(){var t=this.getCurrentTime()-this.config.playerSkip;0>t&&(t=0),this.seek(t)},mute:function(){var t=this.$html.find("button.mute");this.player.isMuted()?(this.player.unMute(),t.hasClass("muted")&&t.removeClass("muted")):(this.player.mute(),t.addClass("muted"))},volup:function(){var t=this.player.getVolume();t<100-this.config.volumeStep?t+=this.config.volumeStep:t=100,this.player.setVolume(t),this.updateVolume(t)},voldwn:function(){var t=this.player.getVolume();t>this.config.volumeStep?t-=this.config.volumeStep:t=0,this.player.setVolume(t),this.updateVolume(t)},getDuration:function(){return this.player.getDuration()},getCurrentTime:function(){return this.player.getCurrentTime()},getBytesLoaded:function(){return this.player.getVideoBytesLoaded()},getBytesTotal:function(){return this.player.getVideoBytesTotal()},seek:function(t){this.player.seekTo(t),this.config.captionsOn&&this.captions&&(this.$html.find(".caption").remove(),this.clearCaptionTimeout(),this.setCaptionTimeout(),this.getPreviousCaption())},cue:function(){this.player.cueVideoById(this.config.media)},toggleCaptions:function(){var t=this,e=this.$html.find(".captions");e.hasClass("captions-off")?(e.removeClass("captions-off").addClass("captions-on"),t.getPreviousCaption(),t.setCaptionTimeout(),t.config.captionsOn=!0):(e.removeClass("captions-on").addClass("captions-off"),t.clearCaptionTimeout(),t.$html.find(".caption").remove(),t.config.captionsOn=!1)}};return this.each(function(e){var i,a,o=t(this),r=function(t){t.$html.width()>580&&t.$html.addClass("player-wide"),t.is_html5&&(t.player=document.getElementById(t.config.id))};s.url.match(/^(http|https)\:\/\/www\.youtube\.com/)?(i=new window.NOMENSA.player.YoutubePlayer(s),a=new window.NOMENSA.player.MediaplayerDecorator(i),a.onPlayerReady(function(){r(a),this.getPlayer().setLoop(!0)}),a.init(o)):(a=new n(e),o.html(a.$html),r(a),window.NOMENSA.player.PlayerDaemon.addPlayer(a))})}}(jQuery),function(t){var e=function(){this.init=function(e,i){var n={outOf:65,applyOnInit:!0,toggleText:"Toggle between chart and table",autoOutdent:!1,outdentAll:!1};this.options=t.extend({},n,i);var a=function(){var t,e=3,i=document.createElement("div"),n=i.getElementsByTagName("i");do i.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->";while(10>e&&n[0]);return e>4?e:t}();return this.ENABLED=!(a&&8>a),this.$table=e,this.$graph=t("<div/>").attr("aria-hidden","true"),this.$graph.attr("class",this.$table.attr("class")).addClass("mc-chart"),this.options.stacked=this.$table.hasClass("mc-stacked"),this.options.negative=this.$table.hasClass("mc-negative"),this.options.multiple=!this.options.stacked&&(this.$table.hasClass("mc-multiple")||this.$table.find("tbody tr").first().find("td").length>2),this.options.autoOutdent=this.options.autoOutdent||this.$table.hasClass("mc-auto-outdent"),this.options.outdentAll=this.options.outdentAll||this.$table.hasClass("mc-outdented"),this.options.multiple&&this.$graph.addClass("mc-multiple"),this.options.hasCaption=!!this.$table.find("caption").length,this.ENABLED&&(this.apply(),this.options.applyOnInit||this.toggle()),this}};e.prototype.construct={},e.prototype.construct.thead=function(){var e=t("<div />",{"class":"mc-thead"}),i=t("<div />",{"class":"mc-tr"}),n="";return this.$table.find("th").each(function(e,i){n+='<div class="mc-th">',n+=t(i).html(),n+="</div>"}),i.append(n),e.append(i),e},e.prototype.construct.tbody=function(){var e=t("<div />",{"class":"mc-tbody"});return this.$table.find("tbody tr").each(function(i,n){var a=t("<div />",{"class":"mc-tr"}),s="";t(n).find("td").each(function(e,i){s+='<div class="mc-td">',s+=t(i).html(),s+="</div>"}),a.append(s),e.append(a)}),e},e.prototype.construct.caption=function(){var t=this.$table.find("caption");return t.clone()},e.prototype.construct.toggleLink=function(){var e=this;return t("<a />",{href:"#","class":"mc-toggle-link",text:this.options.toggleText}).on("click",function(t){e.toggle(t)})},e.prototype.constructChart=function(){var t=this.construct.thead.call(this),e=this.construct.tbody.call(this),i=this.construct.toggleLink.call(this);if(this.options.hasCaption){var n=this.construct.caption.call(this);this.$graph.append(n)}this.$table.before(i),this.$graph.append(t),this.$graph.append(e)},e.prototype.apply=function(){this.ENABLED&&(this.constructChart(),this.addClassesToHeader(),this.calculateMaxWidth(),this.applyWidths(),this.insert(),this.$table.addClass("visually-hidden"),this.applyOutdent())},e.prototype.toggle=function(t){this.$graph.toggle(),this.$table.toggleClass("visually-hidden"),t&&t.preventDefault()},e.prototype.utils={isFloat:function(t){return!isNaN(parseFloat(t))},stripValue:function(t){var e=new RegExp("\\,||%|[a-z]","gi");return t.replace(e,"")},returnMax:function(t){for(var e=0,i=0;i<t.length;i++)t[i]>e&&(e=t[i]);return e},isNegative:function(t){return 0>t}},e.prototype.addClassesToHeader=function(){var e=this.$graph.find(".mc-th").filter(":not(:first)");this.options.stacked&&(e.last().addClass("mc-stacked-header mc-header-total"),e=e.filter(":not(:last)")),e.addClass("mc-key-header").filter(":not(.mc-stacked-header)").each(function(e,i){t(i).addClass("mc-key-"+(e+1))})},e.prototype.calculateMaxWidth=function(){var e=this,i=[],n=0;this.$graph.find(".mc-tr").each(function(a,s){var o=t(s),r=o.find(".mc-td:not(:first)");e.options.stacked&&(r.last().addClass("mc-stacked-total"),r=r.filter(":not(:last)")),o.find(".mc-td:first").addClass("mc-key-cell");var l=0;r.each(function(a,s){var o=t(s).addClass("mc-bar-cell").addClass("mc-bar-"+(a+1)),r=e.utils.stripValue(o.text());if(e.utils.isFloat(r)){var u=parseFloat(r,10),d=Math.abs(u);0===u&&o.addClass("mc-bar-zero"),e.options.negative&&(e.utils.isNegative(u)?(o.addClass("mc-bar-negative"),d>n&&(n=d)):o.addClass("mc-bar-positive")),u=d,e.options.stacked?l+=u:(l=u,i.push(u))}}),e.options.stacked&&i.push(l)});var a={};return a.max=parseFloat(e.utils.returnMax(i),10),a.single=parseFloat(this.options.outOf/a.max,10),this.options.negative&&(a.marginLeft=parseFloat(n,10)*a.single,a.maxNegative=parseFloat(n,10)),a},e.prototype.applyWidths=function(){this.dimensions=this.calculateMaxWidth();var e=this;this.$graph.find(".mc-tr").each(function(i,n){var a=t(n);a.find(".mc-bar-cell:not(.mc-bar-zero)").length,a.find(".mc-bar-cell").each(function(i,n){var a=t(n),s=parseFloat(e.utils.stripValue(a.text()),10),o=s*e.dimensions.single,r=Math.abs(s),l=Math.abs(o);if(e.options.negative)if(a.hasClass("mc-bar-positive"))a.css("margin-left",e.dimensions.marginLeft+"%");else if(r<e.dimensions.maxNegative){var u=(e.dimensions.maxNegative-r)*e.dimensions.single;a.css("margin-left",u+"%")}a.wrapInner("<span />"),a.css("width",l+"%")})})},e.prototype.insert=function(){this.$table.after(this.$graph)},e.prototype.applyOutdent=function(){var e=this;this.$graph.find(".mc-bar-cell"),this.$graph.find(".mc-bar-cell").each(function(i,n){var a=t(n),s=parseFloat(e.utils.stripValue(a.text()),10),o=a.children("span"),r=o.width()+10,l=a.width();parseFloat(a[0].style.width,10),a.height(),e.options.stacked?r>l&&s>0&&a.addClass("mc-value-overflow"):(0===s&&a.addClass("mc-bar-outdented"),e.options.autoOutdent&&r>l||e.options.outdentAll?(a.addClass("mc-bar-outdented"),o.css({"margin-left":"100%",display:"inline-block"})):a.addClass("mc-bar-indented"))})},t.magnaCharta=function(t,i){return(new e).init(t,i)}}(jQuery);var stIsIE=!1;if(sorttable={init:function(){arguments.callee.done||(arguments.callee.done=!0,_timer&&clearInterval(_timer),document.createElement&&document.getElementsByTagName&&(sorttable.DATE_RE=/^(\d\d?)[\/\.-](\d\d?)[\/\.-]((\d\d)?\d\d)$/,forEach(document.getElementsByTagName("table"),function(t){-1!=t.className.search(/\bsortable\b/)&&sorttable.makeSortable(t)})))},makeSortable:function(t){if(0==t.getElementsByTagName("thead").length&&(the=document.createElement("thead"),the.appendChild(t.rows[0]),t.insertBefore(the,t.firstChild)),null==t.tHead&&(t.tHead=t.getElementsByTagName("thead")[0]),1==t.tHead.rows.length){sortbottomrows=[];for(var e=0;e<t.rows.length;e++)-1!=t.rows[e].className.search(/\bsortbottom\b/)&&(sortbottomrows[sortbottomrows.length]=t.rows[e]);if(sortbottomrows){null==t.tFoot&&(tfo=document.createElement("tfoot"),t.appendChild(tfo));for(var e=0;e<sortbottomrows.length;e++)tfo.appendChild(sortbottomrows[e]);delete sortbottomrows}headrow=t.tHead.rows[0].cells;for(var e=0;e<headrow.length;e++)headrow[e].className.match(/\bsorttable_nosort\b/)||(mtch=headrow[e].className.match(/\bsorttable_([a-z0-9]+)\b/),mtch&&(override=mtch[1]),headrow[e].sorttable_sortfunction=mtch&&"function"==typeof sorttable["sort_"+override]?sorttable["sort_"+override]:sorttable.guessType(t,e),headrow[e].sorttable_columnindex=e,headrow[e].sorttable_tbody=t.tBodies[0],dean_addEvent(headrow[e],"click",sorttable.innerSortFunction=function(){if(-1!=this.className.search(/\bsorttable_sorted\b/))return sorttable.reverse(this.sorttable_tbody),this.className=this.className.replace("sorttable_sorted","sorttable_sorted_reverse"),this.removeChild(document.getElementById("sorttable_sortfwdind")),sortrevind=document.createElement("span"),sortrevind.id="sorttable_sortrevind",sortrevind.innerHTML=stIsIE?'&nbsp<font face="webdings">5</font>':"&nbsp;&#x25B4;",this.appendChild(sortrevind),void 0;if(-1!=this.className.search(/\bsorttable_sorted_reverse\b/))return sorttable.reverse(this.sorttable_tbody),this.className=this.className.replace("sorttable_sorted_reverse","sorttable_sorted"),this.removeChild(document.getElementById("sorttable_sortrevind")),sortfwdind=document.createElement("span"),sortfwdind.id="sorttable_sortfwdind",sortfwdind.innerHTML=stIsIE?'&nbsp<font face="webdings">6</font>':"&nbsp;&#x25BE;",this.appendChild(sortfwdind),void 0;theadrow=this.parentNode,forEach(theadrow.childNodes,function(t){1==t.nodeType&&(t.className=t.className.replace("sorttable_sorted_reverse",""),t.className=t.className.replace("sorttable_sorted",""))}),sortfwdind=document.getElementById("sorttable_sortfwdind"),sortfwdind&&sortfwdind.parentNode.removeChild(sortfwdind),sortrevind=document.getElementById("sorttable_sortrevind"),sortrevind&&sortrevind.parentNode.removeChild(sortrevind),this.className+=" sorttable_sorted",sortfwdind=document.createElement("span"),sortfwdind.id="sorttable_sortfwdind",sortfwdind.innerHTML=stIsIE?'&nbsp<font face="webdings">6</font>':"&nbsp;&#x25BE;",this.appendChild(sortfwdind),row_array=[],col=this.sorttable_columnindex,rows=this.sorttable_tbody.rows;for(var t=0;t<rows.length;t++)row_array[row_array.length]=[sorttable.getInnerText(rows[t].cells[col]),rows[t]];row_array.sort(this.sorttable_sortfunction),tb=this.sorttable_tbody;for(var t=0;t<row_array.length;t++)tb.appendChild(row_array[t][1]);delete row_array}))}},guessType:function(t,e){sortfn=sorttable.sort_alpha;for(var i=0;i<t.tBodies[0].rows.length;i++)if(text=sorttable.getInnerText(t.tBodies[0].rows[i].cells[e]),""!=text){if(text.match(/^-?[$]?[\d,.]+%?$/))return sorttable.sort_numeric;if(possdate=text.match(sorttable.DATE_RE)){if(first=parseInt(possdate[1]),second=parseInt(possdate[2]),first>12)return sorttable.sort_ddmm;if(second>12)return sorttable.sort_mmdd;sortfn=sorttable.sort_ddmm}}return sortfn},getInnerText:function(t){if(!t)return"";if(hasInputs="function"==typeof t.getElementsByTagName&&t.getElementsByTagName("input").length,null!=t.getAttribute("sorttable_customkey"))return t.getAttribute("sorttable_customkey");if("undefined"!=typeof t.textContent&&!hasInputs)return t.textContent.replace(/^\s+|\s+$/g,"");if("undefined"!=typeof t.innerText&&!hasInputs)return t.innerText.replace(/^\s+|\s+$/g,"");if("undefined"!=typeof t.text&&!hasInputs)return t.text.replace(/^\s+|\s+$/g,"");switch(t.nodeType){case 3:if("input"==t.nodeName.toLowerCase())return t.value.replace(/^\s+|\s+$/g,"");case 4:return t.nodeValue.replace(/^\s+|\s+$/g,"");case 1:case 11:for(var e="",i=0;i<t.childNodes.length;i++)e+=sorttable.getInnerText(t.childNodes[i]);return e.replace(/^\s+|\s+$/g,"");default:return""}},reverse:function(t){newrows=[];for(var e=0;e<t.rows.length;e++)newrows[newrows.length]=t.rows[e];for(var e=newrows.length-1;e>=0;e--)t.appendChild(newrows[e]);delete newrows},sort_numeric:function(t,e){return aa=parseFloat(t[0].replace(/[^0-9.-]/g,"")),isNaN(aa)&&(aa=0),bb=parseFloat(e[0].replace(/[^0-9.-]/g,"")),isNaN(bb)&&(bb=0),aa-bb},sort_alpha:function(t,e){return t[0]==e[0]?0:t[0]<e[0]?-1:1},sort_ddmm:function(t,e){return mtch=t[0].match(sorttable.DATE_RE),y=mtch[3],m=mtch[2],d=mtch[1],1==m.length&&(m="0"+m),1==d.length&&(d="0"+d),dt1=y+m+d,mtch=e[0].match(sorttable.DATE_RE),y=mtch[3],m=mtch[2],d=mtch[1],1==m.length&&(m="0"+m),1==d.length&&(d="0"+d),dt2=y+m+d,dt1==dt2?0:dt2>dt1?-1:1},sort_mmdd:function(t,e){return mtch=t[0].match(sorttable.DATE_RE),y=mtch[3],d=mtch[2],m=mtch[1],1==m.length&&(m="0"+m),1==d.length&&(d="0"+d),dt1=y+m+d,mtch=e[0].match(sorttable.DATE_RE),y=mtch[3],d=mtch[2],m=mtch[1],1==m.length&&(m="0"+m),1==d.length&&(d="0"+d),dt2=y+m+d,dt1==dt2?0:dt2>dt1?-1:1},shaker_sort:function(t,e){for(var i=0,n=t.length-1,a=!0;a;){a=!1;for(var s=i;n>s;++s)if(e(t[s],t[s+1])>0){var o=t[s];t[s]=t[s+1],t[s+1]=o,a=!0}if(n--,!a)break;for(var s=n;s>i;--s)if(e(t[s],t[s-1])<0){var o=t[s];t[s]=t[s-1],t[s-1]=o,a=!0}i++}}},document.addEventListener&&document.addEventListener("DOMContentLoaded",sorttable.init,!1),/WebKit/i.test(navigator.userAgent))var _timer=setInterval(function(){/loaded|complete/.test(document.readyState)&&sorttable.init()},10);window.onload=sorttable.init,dean_addEvent.guid=1,fixEvent.preventDefault=function(){this.returnValue=!1},fixEvent.stopPropagation=function(){this.cancelBubble=!0},/*
  forEach, version 1.0
  Copyright 2006, Dean Edwards
  License: http://www.opensource.org/licenses/mit-license.php
*/
Array.forEach||(Array.forEach=function(t,e,i){for(var n=0;n<t.length;n++)e.call(i,t[n],n,t)}),Function.prototype.forEach=function(t,e,i){for(var n in t)"undefined"==typeof this.prototype[n]&&e.call(i,t[n],n,t)},String.forEach=function(t,e,i){Array.forEach(t.split(""),function(n,a){e.call(i,n,a,t)})};var forEach=function(t,e,i){if(t){var n=Object;if(t instanceof Function)n=Function;else{if(t.forEach instanceof Function)return t.forEach(e,i),void 0;"string"==typeof t?n=String:"number"==typeof t.length&&(n=Array)}n.forEach(t,e,i)}};!function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.GOVUK&&(t.GOVUK={});var i={_pollingId:null,_isPolling:!1,_hasScrollEvt:!1,_els:[],addEl:function(n,a){var s;if(n.length){s=parseInt(n.css("top"),10),s=isNaN(s)?0:s,i.updateFooterTop(),e(t).on("govuk.pageSizeChanged",i.updateFooterTop);var o=e("<div></div>");o.insertBefore(n);var r=o.offset().top-o.position().top;o.remove();var l={$fixedEl:n,height:a+s,fixedTop:a+r,state:"fixed"};i._els.push(l),i.initTimeout()}},updateFooterTop:function(){var t=e(".js-footer:eq(0)");return 0===t.length?0:(i.footerTop=t.offset().top-10,void 0)},initTimeout:function(){i._hasScrollEvt===!1&&(e(window).scroll(i.onScroll),i._hasScrollEvt=!0)},onScroll:function(){i._isPolling===!1&&i.startPolling()},startPolling:function(){return window.requestAnimationFrame?function(){var t=function(){i.checkScroll(),i._isPolling===!0&&i.startPolling()};i._pollingId=window.requestAnimationFrame(t),i._isPolling=!0}:function(){i._pollingId=window.setInterval(i.checkScroll,16),i._isPolling=!0}}(),stopPolling:function(){return window.requestAnimationFrame?function(){window.cancelAnimationFrame(i._pollingId),i._isPolling=!1}:function(){window.clearInterval(i._pollingId),i._isPolling=!1}}(),checkScroll:function(){var t=e(window).scrollTop();return t<i.cachedScrollTop+2&&t>i.cachedScrollTop-2?(i.stopPolling(),void 0):(i.cachedScrollTop=t,e.each(i._els,function(e,n){var a=t+n.height;a>i.footerTop?i.stick(n):i.unstick(n)}),void 0)},stick:function(t){"fixed"===t.state&&"fixed"===t.$fixedEl.css("position")&&(t.$fixedEl.css({position:"absolute",top:i.footerTop-t.fixedTop}),t.state="absolute")},unstick:function(t){"absolute"===t.state&&(t.$fixedEl.css({position:"",top:""}),t.state="fixed")}};t.GOVUK.stopScrollingAtFooter=i,e(t).load(function(){e(t).trigger("govuk.pageSizeChanged")})}.call(this),/*

Copyright (c) 2012, Bradley Wright
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:
    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
    * Neither the name of the <organization> nor the
      names of its contributors may be used to endorse or promote products
      derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

*/
function(t){"use strict";var e={},i=function(i){return i=i.replace("/","-"),"undefined"==typeof e[i]&&(document.getElementById(i)?e[i]=t("<div />").html(t(document.getElementById(i)).html().trim()).text():templates[i]&&(e[i]=templates[i])),e[i]},n=function(n){var a=i(n),s=null;return"string"==typeof a&&window.Hogan&&(s=e[n]=window.Hogan.compile(a)),null===s&&t.error("Couldn't compile template "+n),s},a=function(t){var e=n(t);return function(t){return e.render(t)}},s=function(e,n){var a=i(e);if("undefined"==typeof a)t.error("Unknown template "+e);else if("object"==typeof a)return a.render(n);return window.Hogan?window.Hogan.compile(a).render(n):window.Mustache?window.Mustache.render(a,n):(t.error("Must have either Hogan.js or Mustache.js to load string templates"),void 0)};t.fn.mustache=function(t,e){return this.html(s(t,e))},t.mustache=function(t,e){return s(t,e)},t.mustacheAsFunction=function(t){return a(t)}}(jQuery),/*
 *  Copyright 2011 Twitter, Inc.
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */
"undefined"==typeof window.Hogan&&(window.Hogan={}),function(t,e){function i(t){return String(null===t||void 0===t?"":t)}function n(t){return t=i(t),u.test(t)?t.replace(a,"&amp;").replace(s,"&lt;").replace(o,"&gt;").replace(r,"&#39;").replace(l,"&quot;"):t}t.Template=function(t,i,n,a){this.r=t||this.r,this.c=n,this.options=a,this.text=i||"",this.buf=e?[]:""},t.Template.prototype={r:function(){return""},v:n,t:i,render:function(t,e,i){return this.ri([t],e||{},i)},ri:function(t,e,i){return this.r(t,e,i)},rp:function(t,e,i,n){var a=i[t];return a?(this.c&&"string"==typeof a&&(a=this.c.compile(a,this.options)),a.ri(e,i,n)):""},rs:function(t,e,i){var n=t[t.length-1];if(!d(n))return i(t,e,this),void 0;for(var a=0;a<n.length;a++)t.push(n[a]),i(t,e,this),t.pop()},s:function(t,e,i,n,a,s,o){var r;return d(t)&&0===t.length?!1:("function"==typeof t&&(t=this.ls(t,e,i,n,a,s,o)),r=""===t||!!t,!n&&r&&e&&e.push("object"==typeof t?t:e[e.length-1]),r)},d:function(t,e,i,n){var a=t.split("."),s=this.f(a[0],e,i,n),o=null;if("."===t&&d(e[e.length-2]))return e[e.length-1];for(var r=1;r<a.length;r++)s&&"object"==typeof s&&a[r]in s?(o=s,s=s[a[r]]):s="";return n&&!s?!1:(n||"function"!=typeof s||(e.push(o),s=this.lv(s,e,i),e.pop()),s)},f:function(t,e,i,n){for(var a=!1,s=null,o=!1,r=e.length-1;r>=0;r--)if(s=e[r],s&&"object"==typeof s&&t in s){a=s[t],o=!0;break}return o?(n||"function"!=typeof a||(a=this.lv(a,e,i)),a):n?!1:""},ho:function(t,e,i,n,a){var s=this.c,o=this.options;o.delimiters=a;var n=t.call(e,n);return n=null==n?String(n):n.toString(),this.b(s.compile(n,o).render(e,i)),!1},b:e?function(t){this.buf.push(t)}:function(t){this.buf+=t},fl:e?function(){var t=this.buf.join("");return this.buf=[],t}:function(){var t=this.buf;return this.buf="",t},ls:function(t,e,i,n,a,s,o){var r=e[e.length-1],l=null;if(!n&&this.c&&t.length>0)return this.ho(t,r,i,this.text.substring(a,s),o);if(l=t.call(r),"function"==typeof l){if(n)return!0;if(this.c)return this.ho(l,r,i,this.text.substring(a,s),o)}return l},lv:function(t,e,n){var a=e[e.length-1],s=t.call(a);return"function"==typeof s&&(s=i(s.call(a)),this.c&&~s.indexOf("{{"))?this.c.compile(s,this.options).render(a,n):i(s)}};var a=/&/g,s=/</g,o=/>/g,r=/\'/g,l=/\"/g,u=/[&<>\"\']/,d=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}}("undefined"!=typeof exports?exports:Hogan),window.templates={},window.templates["documents-_filter_selections"]=new Hogan.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.b('<span class="count">'),n.b(n.v(n.f("result_count",t,e,0))),n.b("</span> <strong>"),n.b(n.v(n.f("pluralized_result_type",t,e,0))),n.b("</strong>"),n.b("\n"+i),n.b('<span class="topics-selections">'),n.b("\n"+i),n.s(n.f("topics",t,e,1),t,e,0,134,287,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("    about <strong>"),i.b(i.v(i.f("name",t,e,0))),i.b('</strong> <a href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" data-field="topics" data-val="'),i.b(i.v(i.f("value",t,e,0))),i.b('" title="Remove '),i.b(i.v(i.f("name",t,e,0))),i.b(' filter">&times;</a> '),i.b(i.v(i.f("joining",t,e,0))),i.b("\n")}),t.pop()),n.b("</span>"),n.b("\n"+i),n.b('<span class="departments-selections">'),n.b("\n"+i),n.s(n.f("departments",t,e,1),t,e,0,363,518,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("    by <strong>"),i.b(i.v(i.f("name",t,e,0))),i.b('</strong> <a href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" data-field="departments" data-val="'),i.b(i.v(i.f("value",t,e,0))),i.b('" title="Remove '),i.b(i.v(i.f("name",t,e,0))),i.b(' filter">&times;</a> '),i.b(i.v(i.f("joining",t,e,0))),i.b("\n")}),t.pop()),n.b("</span>"),n.b("\n"+i),n.s(n.f("world_locations_any?",t,e,1),t,e,0,568,817,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("from"),n.b("\n"+i),n.b('<span class="locations-selections">'),n.b("\n"+i),n.s(n.f("world_locations",t,e,1),t,e,0,632,788,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("    <strong>"),i.b(i.v(i.f("name",t,e,0))),i.b('</strong> <a href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" data-field="world_locations" data-val="'),i.b(i.v(i.f("value",t,e,0))),i.b('" title="Remove '),i.b(i.v(i.f("name",t,e,0))),i.b(' filter">&times;</a> '),i.b(i.v(i.f("joining",t,e,0))),i.b("\n")}),t.pop()),n.b("</span>"),n.b("\n")}),t.pop()),n.b("\n"+i),n.s(n.f("keywords_any?",t,e,1),t,e,0,862,1105,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b("  containing"),n.b("\n"+i),n.b('  <span class="keyword-selections">'),n.b("\n"+i),n.s(n.f("keywords",t,e,1),t,e,0,929,1081,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("      <strong>"),i.b(i.v(i.f("name",t,e,0))),i.b('</strong> <a href="'),i.b(i.v(i.f("url",t,e,0))),i.b('" data-field="keywords" data-val="'),i.b(i.v(i.f("name",t,e,0))),i.b('" title="Remove '),i.b(i.v(i.f("name",t,e,0))),i.b(' filter">&times;</a> '),i.b(i.v(i.f("joining",t,e,0))),i.b("\n")}),t.pop()),n.b("  </span>"),n.b("\n")}),t.pop()),n.b("\n"+i),n.s(n.f("relevant_to_local_government",t,e,1),t,e,0,1158,1264,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('  <span class="local-government-selections">'),n.b("\n"+i),n.b("    <strong>relevant to local government</strong>"),n.b("\n"+i),n.b("  </span>"),n.b("\n")}),t.pop()),n.b("\n"+i),n.s(n.f("filtering_command_and_act_papers?",t,e,1),t,e,0,1337,1560,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('  <span class="official-document-status">which are <strong>Command or Act papers <a data-field="official_document_status" data-val="command_and_act_papers" title="Remove official status filter">&times;</a></strong></span>'),i.b("\n")}),t.pop()),n.s(n.f("filtering_command_papers_only?",t,e,1),t,e,0,1634,1847,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('  <span class="official-document-status">which are <strong>Command papers <a data-field="official_document_status" data-val="command_papers_only" title="Remove official status filter">&times;</a></strong></span>'),i.b("\n")}),t.pop()),n.s(n.f("filtering_act_papers_only?",t,e,1),t,e,0,1914,2119,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('  <span class="official-document-status">which are <strong>Act papers <a data-field="official_document_status" data-val="act_papers_only" title="Remove official status filter">&times;</a></strong></span>'),i.b("\n")}),t.pop()),n.b("\n"+i),n.s(n.f("include_world_location_news",t,e,1),t,e,0,2184,2286,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('  <span class="world-location-news">'),n.b("\n"+i),n.b("    <strong>including location-specific news</strong>"),n.b("\n"+i),n.b("  </span>"),n.b("\n")}),t.pop()),n.b("\n"+i),n.s(n.f("date_from",t,e,1),t,e,0,2334,2387,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("published <strong>after&nbsp;"),i.b(i.v(i.f("date_from",t,e,0))),i.b("</strong>"),i.b("\n")}),t.pop()),n.b("\n"+i),n.s(n.f("date_to",t,e,1),t,e,0,2415,2467,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b("published <strong>before&nbsp;"),i.b(i.v(i.f("date_to",t,e,0))),i.b("</strong>"),i.b("\n")}),t.pop()),n.fl()}),window.templates["documents-_filter_table"]=new Hogan.Template(function(t,e,i){var n=this;return n.b(i=i||""),n.s(n.f("results_any?",t,e,1),t,e,0,17,1376,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('  <ol class="js-document-list document-list">'),n.b("\n"+i),n.s(n.f("results",t,e,1),t,e,0,80,805,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('      <li id="'),n.b(n.v(n.f("type",t,e,0))),n.b("_"),n.b(n.v(n.f("id",t,e,0))),n.b('" class="document-row">'),n.b("\n"+i),n.b('        <h3><a href="'),n.b(n.v(n.f("url",t,e,0))),n.b('">'),n.b(n.v(n.f("title",t,e,0))),n.b("</a></h3>"),n.b("\n"+i),n.b('        <ul class="attributes">'),n.b("\n"+i),n.b("          <li>"),n.b(n.t(n.f("display_date_microformat",t,e,0))),n.b("</li>"),n.b("\n"+i),n.b('          <li class="organisations">'),n.b(n.t(n.f("organisations",t,e,0))),n.b("</li>"),n.b("\n"+i),n.b('          <li class="display-type">'),n.b(n.v(n.f("display_type",t,e,0))),n.b("</li>"),n.b("\n"+i),n.s(n.f("field_of_operation",t,e,1),t,e,0,416,500,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('            <li class="field-of-operation">'),i.b(i.t(i.f("field_of_operation",t,e,0))),i.b("</li>"),i.b("\n")}),t.pop()),n.s(n.f("topics",t,e,1),t,e,0,545,605,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('            <li class="topics">'),i.b(i.t(i.f("topics",t,e,0))),i.b("</li>"),i.b("\n")}),t.pop()),n.s(n.f("publication_collections",t,e,1),t,e,0,655,746,"{{ }}")&&(n.rs(t,e,function(t,e,i){i.b('            <li class="document-collections">'),i.b(i.t(i.f("publication_collections",t,e,0))),i.b("</li>"),i.b("\n")}),t.pop()),n.b("        </ul>"),n.b("\n"+i),n.b("      </li>"),n.b("\n")}),t.pop()),n.b("  </ol>"),n.b("\n"+i),n.s(n.f("more_pages?",t,e,1),t,e,0,844,1359,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('    <nav id="show-more-documents" role="navigation">'),n.b("\n"+i),n.b('      <ul class="previous-next-navigation">'),n.b("\n"+i),n.s(n.f("prev_page?",t,e,1),t,e,0,965,1126,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('          <li class="previous">'),n.b("\n"+i),n.b('            <a href="'),n.b(n.v(n.f("prev_page_url",t,e,0))),n.b('">Previous page <span>'),n.b(n.v(n.f("prev_page",t,e,0))),n.b(" of "),n.b(n.v(n.f("total_pages",t,e,0))),n.b("</span></a>"),n.b("\n"+i),n.b("          </li>"),n.b("\n")}),t.pop()),n.s(n.f("next_page?",t,e,1),t,e,0,1165,1318,"{{ }}")&&(n.rs(t,e,function(t,e,n){n.b('          <li class="next">'),n.b("\n"+i),n.b('            <a href="'),n.b(n.v(n.f("next_page_url",t,e,0))),n.b('">Next page <span>'),n.b(n.v(n.f("next_page",t,e,0))),n.b(" of "),n.b(n.v(n.f("total_pages",t,e,0))),n.b("</span></a>"),n.b("\n"+i),n.b("          </li>"),n.b("\n")}),t.pop()),n.b("      </ul>"),n.b("\n"+i),n.b("    </nav>"),n.b("\n")}),t.pop())}),t.pop()),n.s(n.f("results_any?",t,e,1),t,e,1,0,0,"")||(n.b('  <div class="no-results">'),n.b("\n"+i),n.b("    <h2>"),n.b(n.v(n.f("no_results_title",t,e,0))),n.b("</h2>"),n.b("\n"+i),n.b("    <p>"),n.b(n.v(n.f("no_results_description",t,e,0))),n.b("</p>"),n.b("\n"+i),n.b("    <h3>"),n.b(n.t(n.f("no_results_tna_heading",t,e,0))),n.b("</h3>"),n.b("\n"+i),n.b("    <p>"),n.b(n.t(n.f("no_results_tna_link",t,e,0))),n.b("</p>"),n.b("\n"+i),n.b("  </div>"),n.b("\n")),n.fl()}),function(){"use strict";window.GOVUK=window.GOVUK||{},window.GOVUK.instances={},window.GOVUK.init=function(t,e){function i(t,e){var i=new t(e);return a(i),i}function n(t,e){return t.init(e),t}function a(t){GOVUK.instances[t.constructor.name]=GOVUK.instances[t.constructor.name]||[],GOVUK.instances[t.constructor.name].push(t)}return"function"==typeof t?i(t,e):n(t,e)}}(jQuery),function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.GOVUK&&(t.GOVUK={});var i=function(){e("form input[type=submit]").live("click",function(){var t=e(this),i=t.attr("name"),n=t.val();t.data("confirm")||(t.before('<input type="hidden" name="'+i+'" value="'+n+'">'),t.attr("disabled","disabled"),t.closest("form").submit())})};t.GOVUK.doubleClickProtection=i}.call(this),function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.GOVUK&&(t.GOVUK={});var i={init:function(){i.$sets=e(".js-duplicate-fields"),i.addButton(),i.removeButton(),i.hideDestroyedFields()},addButton:function(){i.$sets.each(function(){var t=e(this),n=e('<a href="#" class="btn add_new js-add-button">Add another</a>');t.append(n),n.on("click",i.addFields)})},addFields:function(t){t.preventDefault();var n=e(t.target),a=n.closest(".js-duplicate-fields"),s=a.find(".js-duplicate-fields-set").last(),o=s.clone(!0);o.find("input[type=text], input[type=hidden], textarea").val(""),o.show(),i.incrementIndexes(o),n.before(o)},removeButton:function(){i.$sets.each(function(){var t=e(this),n=e('<a href="#" class="btn btn-danger js-remove-button">Remove</a>'),a=t.find(".js-duplicate-fields-set");a.append(n),a.find("a.js-remove-button").on("click",i.removeFields)})},removeFields:function(t){t.preventDefault();var n=e(t.target),a=n.closest(".js-duplicate-fields-set"),s=i.destroyInputFor(a);a.hide(),a.find("input").val(""),a.append(s)},destroyInputFor:function(t){var i=t.find("input[type=text], textarea").first(),n=i.attr("name"),a=i.attr("id"),s=a.replace(/_[a-zA-Z]+$/,"__destroy"),o=n.replace(/\[[_a-zA-Z]+\]$/,"[_destroy]");return e('<input class="js-hidden-destroy" id="'+s+'" name="'+o+'" type="hidden" value="true" />')},hideDestroyedFields:function(){i.$sets.each(function(){var t=e(this),i=t.find('.js-hidden-destroy[value="true"], .js-hidden-destroy[value="1"]'),n=i.closest(".js-duplicate-fields-set");n.hide()})},incrementIndexes:function(t){t.find("label,input,textarea,select").each(function(t,i){var n=e(i),a=n.attr("name"),s=n.attr("id"),o=n.attr("for"),r=!1;a&&a.match(/\[([0-9]+)\]/)&&(r=parseInt(a.match(/\[([0-9]+)\]/)[1],10),n.attr("name",a.replace("["+r+"]","["+(r+1)+"]"))),s&&s.match(/_([0-9]+)_/)&&(r===!1&&(r=parseInt(s.match(/_([0-9]+)_/)[1],10)),n.attr("id",s.replace("_"+r+"_","_"+(r+1)+"_"))),o&&o.match(/_([0-9]+)_/)&&(r===!1&&(r=parseInt(o.match(/_([0-9]+)_/)[1],10)),n.attr("for",o.replace("_"+r+"_","_"+(r+1)+"_")))})}};t.GOVUK.duplicateFields=i}.call(this),jQuery.elemental=function(t,e,i){if(attributes=[],"string"==typeof i){var n,a;(n=i.match(/(\.)([-\w]+)/))?a={"class":n[2]}:(n=i.match(/(\#)([-\w]+)/))&&(a={id:n[2]}),i=a}for(key in i)attributes.push(key+'="'+i[key]+'"');var s=$("<"+t+" "+attributes.join(" ")+" />");return"string"==typeof e?s.text(e):null!=e&&s.append(e),s},jQuery(["div","span","ul","ol","li","a","p"]).each(function(){var t=this;$[t]=function(){return $.elemental(t,arguments[0],arguments[1])}}),function(t){t.fn.flashNotice=function(){if(t(this).addClass("js-flash").fadeIn(),!t(this).hasClass("alert"))var e=t(this),i=setTimeout(function(){e.fadeOut()},3e3);t(this).click(function(){i&&clearTimeout(i),t(this).fadeOut()})},t.fn.showNotice=function(e){t(this).html("<p class='flash notice'>"+e+"</p>"),t(".notice",this).flashNotice()},t.fn.showAlert=function(e){t(this).html("<p class='flash alert'>"+e+"</p>"),t(".alert",this).flashNotice()}}(jQuery),function(t){function e(t){if(t.indexOf("youtube.com")>-1){var e,i,n,a,s={};if(a=t.split("?"),1===a.length)return;for(a=a[1].split("&"),e=0,i=a.length;i>e;e++)n=a[e].split("="),s[n[0]]=n[1];return s.v}if(t.indexOf("youtu.be")>-1){var a=t.split("/");return a.pop()}}var i=function(){this.find("a[href*='youtube.com'], a[href*='youtu.be']").each(function(i){var n=t(this),a=e(n.attr("href")),s=t("<span />"),o=n.siblings(".captions");"undefined"!=typeof a&&(n.parent().replaceWith(s),s.player({id:"youtube-"+i,media:a,captions:o.length>0?o.attr("href"):null,url:document.location.protocol+"//www.youtube.com/apiplayer?enablejsapi=1&version=3&playerapiid="}))})};t.fn.extend({enhanceYoutubeVideoLinks:i})}(jQuery),function(t){var e=function(){t(this).find(window.location.hash).addClass("linked")};t.fn.extend({markLinkedAnchor:e})}(jQuery),jQuery(function(t){t(".flash.notice, .flash.alert").flashNotice()}),function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.GOVUK&&(t.GOVUK={});var i={_hasScrolled:!0,_scrollTimeout:!1,init:function(){var t=e(".js-back-to-content");t.length>0&&(i.$els=t,i._scrollTimeout===!1&&(e(window).scroll(i.onScroll),i._scrollTimeout=window.setInterval(i.checkScroll,50)),e(window).resize(i.onResize),i.checkScroll())},onScroll:function(){i._hasScrolled=!0},checkScroll:function(){if(i._hasScrolled===!0){i._hasScrolled=!1;var t=e(window).scrollTop();i.$els.each(function(n,a){var s,o,r=e(a),l=50,u=r.data("backToContent-start"),d=r.data("backToContent-stop"),c=r.data("backToContent-offset"),h=r.data("backToContent-windowOffset");u||(s=e(r.find("a").attr("href")),u=s.height()+s.offset().top+l,r.data("backToContent-start",u),o="auto"==r.css("top"),c=e("#page").offset().top-(o?-15:15),r.data("backToContent-offset",c),h=o?e(window).height()-r.height():0,r.data("backToContent-windowOffset",h),d=e(".js-back-to-content-stop").offset().top-l-h+r.height(),r.data("backToContent-stop",d)),t>u?i.show(r):i.hide(r),t>d?i.stick(r,d-c+h):i.unstick(r)})}},stick:function(t,e){t.css({position:"absolute",top:e})},unstick:function(t){t.css({position:"",top:""})},hide:function(t){t.addClass("visuallyhidden")},show:function(t){e(window).width()>768&&t.removeClass("visuallyhidden")}};t.GOVUK.backToContent=i}.call(this),$(govspeakBarcharts),"undefined"==typeof window.GOVUK&&(window.GOVUK={}),function(t){"use strict";var e={loading:!1,$form:null,formType:"",renderTable:function(e){t(".js-filter-results").mustache("documents-_filter_table",e)},updateAtomFeed:function(e){e.atom_feed_url&&(t(".feeds .feed").attr("href",e.atom_feed_url),t(".feed-panel input").val(e.atom_feed_url))},updateEmailSignup:function(e){e.email_signup_url&&t(".feeds .govdelivery").attr("href",e.email_signup_url)},updateFeeds:function(i){t(".feeds").removeClass("js-hidden"),e.updateAtomFeed(i),e.updateEmailSignup(i)},submitFilters:function(i){i.preventDefault();var n=e.$form,a=n.find("input[type=submit]"),s=n.attr("action"),o=s+".json",r=n.serializeArray();a.addClass("disabled"),t(".filter-results-summary").find(".selections").text("Loading results"),t(".feeds").addClass("js-hidden"),e.loading=!0,t.ajax(o,{cache:!1,dataType:"json",data:r,complete:function(){e.loading=!1},success:function(t){e.updateFeeds(t),t.results&&(e.renderTable(t),e.liveResultSummary(t));var i=s+"?"+n.serialize();history.pushState(e.currentPageState(),null,i),window._gaq&&_gaq.push(["_trackPageview",i])},error:function(){a.removeAttr("disabled")}})},urlWithout:function(t,e){var i=window.location.search,n=new RegExp("&?"+t+"%5B%5D="+e+"&?");return i.replace(n,"&")},urlWithoutKeyword:function(t,e){var i,n,a=window.location.search,s=new RegExp("keywords=[^&]+"),o=[];for(i=0,n=t.length;n>i;i++)i!==e&&o.push(t[i]);return a.replace(s,"keywords="+o.join("+"))},liveResultSummary:function(i){var n,a,s,o,r,l=t(".selections"),u=t(".headings-block h1"),d=e.currentPageState(),c={};if(l.html(""),u.find("span").remove(),i.result_type||(i.result_type="result"),c.result_count=e._numberWithDelimiter(i.total_count),c.pluralized_result_type=e._pluralize(i.result_type,i.total_count),d.selected)for(n=0,a=d.selected.length;a>n;n++)if(r=d.selected[n],r.title.length>0)if("publication_filter_option"==r.id||"announcement_type_option"==r.id)"all"!=r.value&&u.html(u.text().trim()+"<span>: "+r.title[0]+"</span>");else if("world_locations"===r.id){for(c.world_locations=[],s=0,o=r.title.length;o>s;s++)"all"!==r.value[s]&&c.world_locations.push({name:r.title[s],url:e.urlWithout(r.id,r.value[s]),value:r.value[s],joining:o-1>s?"and":""});c.world_locations.length>0&&(c["world_locations_any?"]=!0)}else if("official_document_status"==r.id)switch(r.value[0]){case"command_and_act_papers":c["filtering_command_and_act_papers?"]=!0;break;case"command_papers_only":c["filtering_command_papers_only?"]=!0;break;case"act_papers_only":c["filtering_act_papers_only?"]=!0}else if("sub_orgs"!=r.id&&"date"!=r.id)for(c[r.id]=[],s=0,o=r.title.length;o>s;s++)"all"!==r.value[s]&&c[r.id].push({name:r.title[s],url:e.urlWithout(r.id,r.value[s]),value:r.value[s],joining:o-1>s?"and":""});if(d.text)for(n=0,a=d.text.length;a>n;n++)if(r=d.text[n],r.value.length)if("keywords"===r.id){c["keywords_any?"]=!0,c.keywords=[];var h=r.value.trim().split(/\s+/);for(s=0,o=h.length;o>s;s++)c.keywords.push({name:h[s],url:e.urlWithoutKeyword(h,s-1),joining:o-1>s?"or":""})}else"from_date"===r.id?c.date_from=r.value:"to_date"===r.id&&(c.date_to=r.value);if(d.checked)for(n=0,a=d.checked.length;a>n;n++)r=d.checked[n],"relevant_to_local_government"===r.id&&"1"===r.value?c.relevant_to_local_government=!0:"include_world_location_news"===r.id&&"1"===r.value&&(c.include_world_location_news=!0);l.mustache("documents/_filter_selections",c)},removeFilters:function(e,i){var n=["topics","departments","world_locations","official_document_status"],a=["keywords","from_date","to_date"],s=["relevant_to_local_government"];if(t.inArray(e,n)>-1){var o=t("select option[value='"+i+"']");if(o.length){o.removeAttr("selected");var r=o.closest("select");0===r.find(":selected").length&&r.find(">:first-child").prop("selected",!0),r.change()}}else if(t.inArray(e,a)>-1){var l=t("input#"+e);if(l.length){var u=l.val(),d=new RegExp(i);l.val(u.replace(d,"").trim())}l.parents("form").submit()}else if(t.inArray(e,s)){var c=t("input#"+e);c.length&&c.attr("checked",!1),c.parents("form").submit()}},currentPageState:function(){return{html:t(".js-filter-results").html(),selected:t.map(e.$form.find("select"),function(e){var i=t(e),n=i.attr("id"),a=[],s=[];return t("#"+n+" option:selected").each(function(){a.push(t(this).text()),s.push(t(this).attr("value"))}),{id:n,value:s,title:a}}),text:t.map(e.$form.find("input[type=text]"),function(e){var i=t(e);return{id:i.attr("id"),value:i.val()}}),checked:t.map(e.$form.find("input[type=radio]:checked, input[type=checkbox]:checked"),function(e){var i=t(e);return{id:i.attr("id"),value:i.val()}})}},onPopState:function(e){e.state&&e.state.html&&(t(".js-filter-results").html(e.state.html),t.each(e.state.selected,function(e,i){t("#"+i.id).val(i.value)}),t.each(e.state.text,function(e,i){t("#"+i.id).val(i.value)}),t.each(e.state.checked,function(e,i){t("#"+i.id).attr("checked",!0)}))},_numberWithDelimiter:function(t){var e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")},_pluralize:function(t,e){return 1===e?t:"y"===t.slice(-1)?t.slice(0,-1)+"ies":t+"s"}};window.GOVUK.documentFilter=e;var i=function(){return window.ieVersion&&6===ieVersion?this:(this.each(function(){if(window.GOVUK.support.history()){var i=t(this);t(window).on("popstate",function(){e.onPopState(event)}),e.$form=i,e.formType=i.attr("action").split("/").pop(),history.replaceState(e.currentPageState(),null),i.submit(e.submitFilters);var n=function(){var t=0;return function(e,i){clearTimeout(t),t=setTimeout(e,i)}}();i.find("select, input[type=checkbox]").change(function(){i.submit()}),t("#keyword-filter").add("#date-range-filter").find("input[type=text]").keyup(function(){n(function(){i.submit()},600)}),t(".filter-results-summary").delegate("a","click",function(i){i.preventDefault(),e.removeFilters(t(this).data("field"),t(this).data("val"))}),t(".submit").addClass("js-hidden")}}),this)};t.fn.extend({enableDocumentFilter:i})}(jQuery),function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.GOVUK&&(t.GOVUK={});var i={duplicate:function(e){e.preventDefault();var n=i.$form.find("fieldset:last").clone();n.find("select").val(""),n.find('input[type="checkbox"]').attr("checked",!1),t.GOVUK.duplicateFields.incrementIndexes(n),n.insertAfter(i.$form.find("fieldset:last"))},init:function(){i.$form=e(".js-email-signup"),i.$form.length>0&&i.$form.find(".js-duplicate").click(i.duplicate)}};t.GOVUK.emailSignup=i}.call(this),function(){"use strict";window.GOVUK=window.GOVUK||{},window.GOVUK.feeds={init:function(){$(".js-feed").on("click",window.GOVUK.feeds.toggle)},toggle:function(t){t.preventDefault();var e=$(t.target).siblings(".js-feed-panel");e.toggle(),e.find("input").select()}}}(),function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.GOVUK&&(t.GOVUK={});var i={_terms:!1,_regexCache:{},init:function(){var t=e(".js-filter-list");1===t.length&&(i.$form=e(".js-filter-form").show(),i.$filterItems=e(".js-filter-item"),i.$filterBlock=e(".js-filter-block"),t.append(i.$form),i.$form.submit(i.updateResults),i.$form.find("input").keyup(i.updateResults))},updateResults:function(t){t.preventDefault();var n=i.$form.find("input").val(),a=i.getItems(n);e(document).trigger("govuk.hideDepartmentChildren.hideAll"),i.$filterItems.hide(),e(a).show(),i.hideEmptyBlocks(a)},hideEmptyBlocks:function(t){0===t.length?(e(".js-filter-no-results").addClass("reveal"),i.$filterBlock.hide()):(e(".js-filter-no-results").removeClass("reveal"),i.$filterBlock.show(),i.$filterBlock.each(function(t,i){var n=e(i),a=n.find(".js-filter-count"),s=n.find(".js-filter-item:visible");0===s.length?n.hide():a.length>0&&a.text(s.length)}))},getItems:function(t){var e,n=i.getRegex(t),a=i.getFilterTerms(),s=[];for(e in a)e.match(n)&&s.push(a[e]);return s},getRegex:function(t){return"undefined"==typeof i._regexCache[t]&&(i._regexCache[t]=new RegExp(t.replace(/\W/,".*"),"i")),i._regexCache[t]},getFilterTerms:function(){return i._terms===!1&&(i._terms={},i.$filterItems.each(function(t,n){i._terms[e(n).data("filter-terms")]=n})),i._terms}};t.GOVUK.filterListItems=i}.call(this),function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.GOVUK&&(t.GOVUK={});var i={init:function(){var n=e(".js-hide-department-children .department"),a=t.location.hash;n.each(function(t,i){var n=e(i),s=n.find(".organisations-box"),o=e('<a href="#" class="view-all">view all</a>');0===n.find(a).length&&n.toggleClass("js-hiding-children"),s.removeClass("js-hidden"),o.click(function(t){t.preventDefault(),n.toggleClass("js-hiding-children")}),o.insertBefore(s)}),e(document).on("govuk.hideDepartmentChildren.hideAll",i.hideAllChildren)},hideAllChildren:function(){e(".js-hide-department-children .department").addClass("js-hiding-children")}};t.GOVUK.hideDepartmentChildren=i}.call(this),function(t){"use strict";function e(t){return parseInt(t.position().top,10)}t.fn.hideExtraRows=function(i){return i=t.extend({rows:1},i),this.each(function(n,a){var s=t(a).children();if(s.length>1){var o=e(s.first()),r=0;if(s.slice(1).each(function(n,a){r<i.rows&&e(t(a))>o&&(o=e(t(a)),r+=1),r>=i.rows&&t(a).addClass("js-hidden")}),r>=i.rows){var l=t('<a class="show-other-content" href="#" title="Show additional content"><span class="plus">+&nbsp;</span>others</a>');l.on("click",function(e){e.preventDefault(),s.filter(".js-hidden").removeClass("js-hidden").addClass("js-shown"),i.showWrapper?i.showWrapper.remove():t(e.target).remove()}),i.showWrapper&&(l=i.showWrapper.append(l)),i.appendToParent?s.first().parent().append(l):s.first().parent().after(l)}}}),this}}(jQuery),function(t){"use strict";t.fn.hideOtherLinks=function(e){var i={linkElement:"a",alwaysVisibleClass:".always-visible"};return t.extend(i,e),t(this).each(function(e,n){var a=t(n),s=t('<span class="other-content" />'),o=[],r=[],l=o,u=!1;if(!(a.children(i.linkElement).length<=2&&a.text().length<=100)&&(t(a.contents()).each(function(e,n){return n.nodeValue&&("."===n.nodeValue||n.nodeValue.match(/^\s+$/))?(u="."===n.nodeValue,void 0):(l.push(n),t(n).is(i.linkElement)&&!t(n).next(i.linkElement).is(i.alwaysVisibleClass)&&(l=r),void 0)}),r.length)){a.empty(),t(o).each(function(t,e){a[0].appendChild(e)}),t(r).each(function(t,e){s[0].appendChild(e)}),a.append(s),u&&a.append("."),s.hide();var d=s.children(i.linkElement).length,c=t('<a href="#" class="show-other-content" title="Show additional links"><span class="plus">+&nbsp;</span>'+d+" other"+(d>1?"s":"")+"</a>");c.on("click",function(e){e.preventDefault(),t(this).remove(),s.show().focus()}),s.before(c),a.attr("aria-live","polite")}}),this}}(jQuery),jQuery(function(t){t(".js-hide-other-links").hideOtherLinks(),t(".js-hide-other-departments").hideOtherLinks({linkElement:"span",alwaysVisibleClass:".lead"}),t(".govspeak").enhanceYoutubeVideoLinks(),t(".detailed-guides-show").trackExternalLinks(),GOVUK.stickAtTopWhenScrolling.init(),t(".js-toggle-change-notes").toggler({actLikeLightbox:!0}),t(".js-toggle-change-notes").click(function(){window.changeNoteTrackingEventSent||(window._gaq&&_gaq.push(["_trackEvent","edd_inside_gov","change_note","shown",0,!0]),window.changeNoteTrackingEventSent=!0)}),t(".js-toggle-footer-change-notes").toggler(),t(".js-toggle-accessibility-warning").toggler({header:".toggler",content:".help-block"}),t(".js-toggle-org-list").toggler({actLikeLightbox:!0}),t(".js-document-filter").enableDocumentFilter(),t(".js-hide-extra-logos .organisations-icon-list").hideExtraRows({appendToParent:!0,showWrapper:t("<li/>")}),t(".js-hide-extra-contacts").hideExtraRows({rows:2}),t(".js-hide-extra-social-media").hideExtraRows({rows:5}),GOVUK.hideDepartmentChildren.init(),GOVUK.filterListItems.init(),GOVUK.showHide.init(),GOVUK.emailSignup.init(),GOVUK.virtualTour.init(),GOVUK.feeds.init()}),jQuery(window).load(function(){GOVUK.backToContent.init()}),function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.GOVUK&&(t.GOVUK={});var i={init:function(){i.$toggle=e(".js-showhide"),i.$toggle.length>0&&(i.$target=e(i.$toggle[0].hash),i.$toggle.on("click",i.toggle),i.$toggle.is(":visible")&&i.hideStuff())},toggle:function(t){return t.preventDefault(),i.$target.hasClass("js-hidden")?i.showStuff():i.hideStuff(),!1},showStuff:function(){i.$target.removeClass("js-hidden"),i.$toggle.removeClass("closed").text(i.$toggle.text().replace("Show","Hide"))},hideStuff:function(){i.$target.addClass("js-hidden"),i.$toggle.addClass("closed").text(i.$toggle.text().replace("Hide","Show"))}};t.GOVUK.showHide=i}.call(this),function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.GOVUK&&(t.GOVUK={});var i={_hasScrolled:!1,_scrollTimeout:!1,init:function(){var n=e(".js-stick-at-top-when-scrolling");n.length>0&&(i.$els=n,i._scrollTimeout===!1&&(e(window).scroll(i.onScroll),i._scrollTimeout=window.setInterval(i.checkScroll,50)),e(window).resize(i.onResize)),t.GOVUK.stopScrollingAtFooter&&n.each(function(i,n){var a=e(n).find("img");if(a.length>0){var s=new Image;s.onload=function(){t.GOVUK.stopScrollingAtFooter.addEl(e(n),e(n).outerHeight())},s.src=a.attr("src")}else t.GOVUK.stopScrollingAtFooter.addEl(e(n),e(n).outerHeight())})},onScroll:function(){i._hasScrolled=!0},checkScroll:function(){if(i._hasScrolled===!0){i._hasScrolled=!1;var t=e(window).scrollTop();i.$els.each(function(n,a){var s=e(a),o=s.data("scrolled-from");o&&o>t?i.release(s):e(window).width()>768&&t>=s.offset().top&&i.stick(s)})}},stick:function(t){if(!t.hasClass("content-fixed")){t.data("scrolled-from",t.offset().top);var e=Math.max(t.height(),1);t.before('<div class="shim" style="width: '+t.width()+"px; height: "+e+'px">&nbsp;</div>'),t.css("width",t.width()+"px").addClass("content-fixed")}},release:function(t){t.hasClass("content-fixed")&&(t.data("scrolled-from",!1),t.removeClass("content-fixed").css("width",""),t.siblings(".shim").remove())}};t.GOVUK.stickAtTopWhenScrolling=i}.call(this),"undefined"==typeof window.GOVUK&&(window.GOVUK={}),"undefined"==typeof window.GOVUK.support&&(window.GOVUK.support={}),window.GOVUK.support.history=function(){return window.history&&window.history.pushState&&window.history.replaceState},function(t){t.fn.toggler=function(e){return e=t.extend({header:".toggle",content:".overlay",showArrow:!0,actLikeLightbox:!1},e),this.each(function(i,n){function a(){s.toggleClass("open"),r.toggleClass("visuallyhidden"),t(document).trigger("govuk.pageSizeChanged")}var s=t(n),o=s.find(e.header),r=s.find(e.content);o.length>0&&r.length>0&&(o.attr("tabindex",0),s.addClass("toggleable"),r.addClass("visuallyhidden"),r.removeClass("js-hidden"),e.showArrow&&r.prepend('<span class="arrow"></span>'),o.keyup(function(t){13==t.which&&(t.preventDefault(),a())}),o.click(function(t){t.preventDefault()}),o.mouseup(function(t){t.preventDefault(),a()}),e.actLikeLightbox&&t(document).click(function(e){0===t(e.target).closest(s).length&&s.hasClass("open")&&a()}))}),this}}(jQuery),function(t){var e=function(){t(this).find("a[rel='external']").each(function(){t(this).click(function(t){try{!t.metaKey&&!t.ctrlKey&&window._gat&&_gat&&_gat._getTrackerByName&&_gat._getTrackerByName()._trackEvent&&(t.preventDefault(),_gat._getTrackerByName()._trackEvent("Specialist-external-link",this.href),setTimeout("document.location = '"+this.href+"'",100))}catch(e){}})})};t.fn.extend({trackExternalLinks:e})}(jQuery),function(){"use strict";var t=this,e=t.jQuery;"undefined"==typeof t.GOVUK&&(t.GOVUK={});var i={tours:[],addTourPlayerWrapper:function(){i.$player=e('<div id="tour-player"></div>'),i.$tour.prepend(i.$player)},findTours:function(){i.$tour.find(".tour-info").each(function(t,n){var a=e(n);i.tours.push({$el:a,id:a.attr("id"),title:a.find("h3"),xml:a.data("tour-xml")})})},findTour:function(t){var e,n;for(e=0,n=i.tours.length;n>e;e++)if(i.tours[e].id===t)return i.tours[e];return!1},switchTour:function(t){var n=e(t.target).attr("href").substr(1),a=i.findTour(n);t.preventDefault(),i.loadTour(a)},loadTour:function(t){i.$player.html(""),embedpano({swf:"/government/assets/tour/tour_pano.swf",xml:"/government/assets/tour/"+t.xml,target:"tour-player"}),i.$tour.find(".js-visible").not(t.$el).removeClass("js-visible"),t.$el.addClass("js-visible")},init:function(){i.$tour=e(".js-virtual-tour"),1===i.$tour.length&&(i.findTours(),i.addTourPlayerWrapper(),i.$nav=i.$tour.find(".tour-nav"),i.$nav.on("click","a",i.switchTour),i.loadTour(i.tours[0]))}};t.GOVUK.virtualTour=i}.call(this);