var cookieUtils=function(){var d;d=function(){for(var b=[],e=document.cookie.split(";"),c=0,d,c=0;c<e.length;c+=1)d=e[c].split("="),b.push({key:d[0].trim(),value:d[1]?d[1].trim():void 0});return b};return{cookiesAsKeyValues:d,getCookieNamed:function(b){for(var e=d(),c=0,c=0;c<e.length;c+=1)if(e[c].key===b)return e[c]},setSessionCookie:function(b){document.cookie=b.key+"="+b.value+(void 0===b.path?"; Path=/":"; Path="+b.path)},deleteCookieNamed:function(b){document.cookie=b.trim()+"=deleted;expires="+
(new Date(0)).toUTCString()+"; Path=/"},arrayify:function(b){return"[object Array]"!==Object.prototype.toString.call(b)?[b]:b}}}(),lightGate=function(){var d="journey_events",b,e,c,h,g,k,f={addStartingEventToCookie:function(){var a={key:d,value:JSON.stringify(c)};void 0!==b&&(a.path=b);cookieUtils.setSessionCookie(a)},sendCookieEvents:function(){var a=cookieUtils.getCookieNamed(d),b=0;if(a&&a.value){a=cookieUtils.arrayify(JSON.parse(a.value));for(b=0;b<a.length;b+=1)f.sendEvent(a[b]);cookieUtils.deleteCookieNamed(d)}},
bindStartingEvent:function(){var a=document.getElementById(e);a&&(a.onclick=f.addStartingEventToCookie)},doEndingEvent:function(){document.getElementsByTagName("body")[0].getAttribute("id")===h&&f.sendEvent(g)},jsonEqual:function(a,b){return JSON.stringify(a)===JSON.stringify(b)},sendEvent:function(a){void 0===a.stage&&a===g&&(a.stage=1);void 0===a.stage&&f.jsonEqual(a,c)&&(a.stage=0);k(a)}};return{init:function(){f.bindStartingEvent();f.sendCookieEvents();f.doEndingEvent()},cookieName:function(a){d=
a;return this},journeyStart:function(a){e=a.linkId;c=a.eventObject;return this},journeyEnd:function(a){h=a.bodyId;g=a.eventObject;return this},sendFunction:function(a){k=a;return this},cookiePath:function(a){b=a;return this}}}();
