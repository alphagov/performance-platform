Object.keys||(Object.keys=function(){var c=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),g="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),d=g.length;return function(e){if("object"!==typeof e&&"function"!==typeof e||null===e)throw new TypeError("Object.keys called on non-object");var k=[],f;for(f in e)c.call(e,f)&&k.push(f);if(b)for(f=0;f<d;f+=1)c.call(e,g[f])&&k.push(g[f]);return k}}());
var GOVUK=GOVUK||{};GOVUK.performance={};GOVUK.performance.addToNamespace=function(c,b){if(void 0===GOVUK.performance[c])GOVUK.performance[c]=b;else throw Error("There is already a key: '"+c+"' in the namespace.");};GOVUK.performance.close=function(){GOVUK.performance.addToNamespace=void 0;GOVUK.performance.close=void 0};
GOVUK.performance.addToNamespace("cookieUtils",function(){var c;c=function(){for(var b=[],c=document.cookie.split(";"),d=0,e,d=0;d<c.length;d+=1)e=c[d].split("="),b.push({key:e[0].trim(),value:e[1]?e[1].trim():void 0});return b};return{cookiesAsKeyValues:c,getCookieNamed:function(b){for(var g=c(),d=0,d=0;d<g.length;d+=1)if(g[d].key===b)return g[d]},setSessionCookie:function(b){document.cookie=b.key+"="+b.value+(void 0===b.path?"; Path=/":"; Path="+b.path)},deleteCookieNamed:function(b){document.cookie=
b.trim()+"=deleted;expires="+(new Date(0)).toUTCString()+"; Path=/"},arrayify:function(b){return"[object Array]"!==Object.prototype.toString.call(b)?[b]:b}}}());
GOVUK.performance.addToNamespace("lightGate",function(){var c="journey_events",b,g,d,e,k,f,l={},m=GOVUK.performance.cookieUtils,h={addStartingEventToCookie:function(){var a={key:c,value:JSON.stringify(d)};void 0!==b&&(a.path=b);m.setSessionCookie(a)},sendCookieEvents:function(){var a=m.getCookieNamed(c),b=0;if(a&&a.value){a=m.arrayify(JSON.parse(a.value));for(b=0;b<a.length;b+=1)h.sendEvent(a[b]);m.deleteCookieNamed(c)}},bindStartingEvent:function(){var a=document.getElementById(g);a&&(a.onclick=
h.addStartingEventToCookie)},doLandOnPageEvents:function(){var a=0,b=Object.keys(l),c=document.getElementsByTagName("body")[0].getAttribute("id");c===e&&h.sendEvent(k);for(a=0;a<b.length;a+=1)c===b[a]&&h.sendEvent(l[b[a]])},jsonEqual:function(a,b){return JSON.stringify(a)===JSON.stringify(b)},sendEvent:function(a){void 0===a.stage&&a===k&&(a.stage=Object.keys(l).length+1);void 0===a.stage&&h.jsonEqual(a,d)&&(a.stage=0);f(a)}};return{init:function(){h.bindStartingEvent();h.sendCookieEvents();h.doLandOnPageEvents()},
cookieName:function(a){c=a;return this},journeyStart:function(a){g=a.linkId;d=a.eventObject;return this},journeyEnd:function(a){e=a.bodyId;k=a.eventObject;return this},journeyStage:function(a){void 0===a.eventObject.stage&&(a.eventObject.stage=Object.keys(l).length+1);l[a.bodyId]=a.eventObject;return this},sendFunction:function(a){f=a;return this},cookiePath:function(a){b=a;return this}}}());
